import{Q as w,a as l,b as _}from"./QTable.54a77e6e.js";import{_ as N,n as c,o as f,c as p,w as t,f as k,a as o,e as s,aw as d,L as C,ah as v}from"./index.ef228992.js";import{Q as y}from"./QInput.a2bee355.js";import{Q as F,a as g,b,c as Q}from"./QPageSticky.a179ccb3.js";import{Q as $}from"./QPage.2fc420a1.js";import{T as q}from"./TouchPan.9047fff0.js";import{api as A}from"./axios.23aa70c0.js";import{e as T}from"./export-file.dc78ba05.js";import{u as R}from"./use-quasar.38626e8f.js";import{a as G}from"./authenticate.bcdfbf4f.js";import{h as P}from"./moment.9709ab41.js";import"./format.6bd9982d.js";import"./use-key-composition.25c6204a.js";import"./QItemLabel.1cc16253.js";import"./js.cookie.f93afda9.js";function h(e,i,n){let r=i!==void 0?i(e,n):e;return r=r==null?"":String(r),r=r.split('"').join('""'),`"${r}"`}const V=R(),x={name:"GastoPage",data(){return{rows:[],columns:[{label:"Nombre Entidad ",name:"Nombre",required:!0,align:"center",field:e=>e.Nombre,format:e=>`${e}`,sortable:!0},{label:"NCF",name:"NCF",required:!0,align:"center",field:e=>e.NCF,format:e=>`${e}`,sortable:!0},{label:"Factura",name:"factura",required:!0,align:"center",field:e=>e.factura,format:e=>`${e}`,sortable:!0},{label:"RNC",name:"RNC",required:!0,align:"lefth",field:e=>e.RNC,format:e=>`${e}`,sortable:!0},{label:"Direccion",name:"direccion",required:!0,align:"lefth",field:e=>e.direccion,format:e=>`${e}`,sortable:!0},{label:"Monto Inicial",name:"montoinicial",required:!0,align:"lefth",field:e=>e.cuentaporpagar.montoinicial,format:e=>`${e}`,sortable:!0},{label:"Monto Restante",name:"montorestante",required:!0,align:"lefth",field:e=>e.cuentaporpagar.montorestante,format:e=>`${e}`,sortable:!0},{label:"Fecha",name:"createdAt",required:!0,align:"center",field:e=>e.createdAt,format:e=>`${e}`,sortable:!0}]}},components:{},methods:{loadGastos(){A.get("/gastos-empresas/",{headers:{Authorization:`Bearer ${G.getUserLogged()}`}}).then(e=>{this.rows=e.data}).catch(e=>this.$q.notify({type:"negative",position:"top",message:e.response.data.message}))},onRowClick(e){this.$router.push({path:"/detailgasto/"+e.id,params:{idgasto:e.id}})},AddGasto(){this.$router.push("/addgasto")},OpenNewConduce(){this.$router.push("/newconduce")},FormatoFecha(e){return P(String(e)).format("MM/DD/YYYY hh:mm")},exportTable(){const e=[this.columns.map(n=>h(n.label))].concat(this.rows.map(n=>this.columns.map(r=>h(typeof r.field=="function"?r.field(n):n[r.field===void 0?r.name:r.field],r.format,n)).join(","))).join(`\r
`);T("Listado_gastos.csv",e,"text/csv")!==!0&&V.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})},OpenNewPrefactura(){this.$router.push("/addPrefactura")}},mounted(){this.loadGastos()},setup(){return{confirm:c(!1),filter:c("")}}},B={class:"q-pa-md"};function D(e,i,n,r,m,u){return f(),p($,{class:"q-pa-md"},{default:t(()=>[k("div",B,[o(_,{flat:"",bordered:"",title:"Gastos",rows:m.rows,columns:m.columns,color:"primary","row-key":"name"},{body:t(a=>[o(w,{props:a,onClick:M=>u.onRowClick(a.row)},{default:t(()=>[o(l,{key:"Nombre",props:a},{default:t(()=>[s(d(a.row.Nombre),1)]),_:2},1032,["props"]),o(l,{key:"NCF",props:a},{default:t(()=>[s(d(a.row.NCF),1)]),_:2},1032,["props"]),o(l,{key:"factura",props:a},{default:t(()=>[s(d(a.row.factura),1)]),_:2},1032,["props"]),o(l,{key:"RNC",props:a},{default:t(()=>[s(d(a.row.RNC),1)]),_:2},1032,["props"]),o(l,{key:"direccion",props:a},{default:t(()=>[s(d(a.row.direccion),1)]),_:2},1032,["props"]),o(l,{key:"montoinicial",props:a},{default:t(()=>[s(d(a.row.cuentaporpagar.montoinicial),1)]),_:2},1032,["props"]),o(l,{key:"montorestante",props:a},{default:t(()=>[s(d(a.row.cuentaporpagar.montorestante),1)]),_:2},1032,["props"]),o(l,{key:"createdAt",props:a},{default:t(()=>[s(d(u.FormatoFecha(a.row.createdAt)),1)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),"top-right":t(()=>[o(y,{borderless:"",dense:"",debounce:"300",modelValue:r.filter,"onUpdate:modelValue":i[0]||(i[0]=a=>r.filter=a),placeholder:"Buscar"},{append:t(()=>[o(C,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","columns"])]),o(Q,{position:"top-right",offset:[18,18]},{default:t(()=>[v((f(),p(F,{icon:"add",direction:"down",color:"primary",disable:e.draggingFab},{default:t(()=>[o(g,{onClick:i[1]||(i[1]=a=>u.exportTable()),color:"positive",icon:"download",disable:e.draggingFab},{default:t(()=>[o(b,null,{default:t(()=>[s(" Descargar ")]),_:1})]),_:1},8,["disable"]),o(g,{onClick:i[2]||(i[2]=a=>u.AddGasto()),color:"positive",icon:"add_box",disable:e.draggingFab},{default:t(()=>[o(b,null,{default:t(()=>[s(" Adicionar ")]),_:1})]),_:1},8,["disable"])]),_:1},8,["disable"])),[[q,e.moveFab,void 0,{prevent:!0,mouse:!0}]])]),_:1})]),_:1})}var ee=N(x,[["render",D]]);export{ee as default};
