import{Q as D,a as h,b as N}from"./QTable.54a77e6e.js";import{_ as E,n as U,o as q,c as V,w as i,f as l,a as e,e as c,aw as b,N as y,J as g,af as p,M as m,ax as v,ah as Q,Q as A}from"./index.ef228992.js";import{Q as u}from"./QInput.a2bee355.js";import{Q as w}from"./QCardActions.bed2bb53.js";import{Q as B,a as _,b as k,c as T}from"./QPageSticky.a179ccb3.js";import{Q as S}from"./QPage.2fc420a1.js";import{T as z}from"./TouchPan.9047fff0.js";import{C as F}from"./ClosePopup.6197016b.js";import{api as f}from"./axios.23aa70c0.js";import{e as L}from"./export-file.dc78ba05.js";import{u as P}from"./use-quasar.38626e8f.js";import{a as C}from"./authenticate.bcdfbf4f.js";import"./format.6bd9982d.js";import"./use-key-composition.25c6204a.js";import"./QItemLabel.1cc16253.js";import"./js.cookie.f93afda9.js";function x(o,t,n){let r=t!==void 0?t(o,n):o;return r=r==null?"":String(r),r=r.split('"').join('""'),`"${r}"`}const $=P(),j={name:"CargoPage",data(){return{newCargo:!1,editCargo:!1,rows:[],columns:[{label:"Nombre del Cargo",name:"name",required:!0,align:"center",field:o=>o.name,format:o=>`${o}`,sortable:!0},{label:"Descripcion",name:"descripcion",required:!1,align:"center",field:o=>o.descripcion,format:o=>`${o}`,sortable:!0}],cargos:[],cargo:{name:"",descripcion:""},ideselected:0}},components:{},methods:{loadCargo(){f.get("/cargo/",{headers:{Authorization:`Bearer ${C.getUserLogged()}`}}).then(o=>{this.rows=o.data}).catch(o=>this.$q.notify({type:"negative",position:"top",message:o.response.data.message}))},OpenNewCargo(){this.cargo.name="",this.cargo.descripcion="",this.newCargo=!0},ClosedNewCargo(){this.cargo.name="",this.cargo.descripcion="",this.newCargo=!1},async AddCargo(){this.cargo.name!==""?(await f.post("/cargo/",this.cargo,{headers:{Authorization:`Bearer ${C.getUserLogged()}`}}).then(o=>{this.$q.notify({color:"positive",position:"top",message:"Se inserto el cargo "+o.data.name,icon:"done"})}).catch(o=>this.$q.notify({type:"negative",position:"top",message:o.response.data.message})),this.newCargo=!1,this.loadCargo()):this.$q.notify({color:"negative",position:"top",message:"Llene los capos requeridos",icon:"report_problem"})},OpenEdit(){this.editCargo=!0},async EditCargo(){this.cargo.name!==""?(await f.patch("/cargo/"+this.idselected,this.cargo,{headers:{Authorization:`Bearer ${C.getUserLogged()}`}}).then(o=>{this.$q.notify({color:"positive",position:"top",message:"Se Modifico el Cargo "+o.data.name,icon:"done"})}).catch(o=>this.$q.notify({type:"negative",position:"top",message:o.response.data.message})),this.editCargo=!1,this.loadCargo()):this.$q.notify({color:"negative",position:"top",message:"Llene los capos requeridos",icon:"report_problem"})},ClosedEditCargo(){this.cargo={},this.editCargo=!1},async DeleteCargo(){await f.delete("/cargo/"+this.idselected,{headers:{Authorization:`Bearer ${C.getUserLogged()}`}}).then(o=>{this.$q.notify({color:"positive",position:"top",message:"Se Elimino el Cargo "+o.data.name,icon:"done"})}).catch(o=>this.$q.notify({type:"negative",position:"top",message:o.response.data.message})),this.confirm=!1,this.editCargo=!1,this.loadCargo()},onRowClick(o){this.cargo.name=o.name,this.cargo.descripcion=o.descripcion,this.idselected=o.id,this.editCargo=!0},exportTable(){const o=[this.columns.map(n=>x(n.label))].concat(this.rows.map(n=>this.columns.map(r=>x(typeof r.field=="function"?r.field(n):n[r.field===void 0?r.name:r.field],r.format,n)).join(","))).join(`\r
`);L("table-export.csv",o,"text/csv")!==!0&&$.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}},mounted(){this.loadCargo()},setup(){return{confirm:U(!1)}}},O={class:"q-pa-md"},M={class:"q-pa-md q-gutter-sm"},R=l("div",{class:"text-h6"},"Nuevo Cargo",-1),I={class:"q-pt-none",style:{"max-width":"700px"}},J={class:"q-pa-md q-gutter-sm"},G=l("div",{class:"text-h6"},"Editar Cargo",-1),H={class:"q-pt-none",style:{"max-width":"700px"}},K={class:"q-pa-md q-gutter-sm"},W=l("span",{class:"q-ml-sm"},"Desea eliminar el Cargo?.",-1);function X(o,t,n,r,s,d){return q(),V(S,{class:"q-pa-md"},{default:i(()=>[l("div",O,[e(N,{flat:"",bordered:"",title:"Cargos",rows:s.rows,columns:s.columns,color:"primary","row-key":"name"},{body:i(a=>[e(D,{props:a,onClick:Y=>d.onRowClick(a.row)},{default:i(()=>[e(h,{key:"name",props:a},{default:i(()=>[c(b(a.row.name),1)]),_:2},1032,["props"]),e(h,{key:"descripcion",props:a},{default:i(()=>[c(b(a.row.descripcion),1)]),_:2},1032,["props"]),e(h,{key:"valor",props:a},{default:i(()=>[c(b(a.row.valor),1)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["rows","columns"])]),l("template",null,[l("div",M,[e(v,{modelValue:s.newCargo,"onUpdate:modelValue":t[4]||(t[4]=a=>s.newCargo=a),persistent:""},{default:i(()=>[e(y,{class:"my-card",flat:"",bordered:""},{default:i(()=>[e(g,null,{default:i(()=>[R]),_:1}),e(p),e(g,null,{default:i(()=>[l("div",I,[e(u,{filled:"",modelValue:s.cargo.name,"onUpdate:modelValue":t[0]||(t[0]=a=>s.cargo.name=a),label:"Nombre *",hint:"Nombre del cargo","lazy-rules":"",rules:[a=>a&&a.length>0||"Debe introducir un Cargo"]},null,8,["modelValue","rules"]),e(u,{modelValue:s.cargo.descripcion,"onUpdate:modelValue":t[1]||(t[1]=a=>s.cargo.descripcion=a),filled:"",type:"textarea",hint:"Descripcion del cargo",label:"Descripcion"},null,8,["modelValue"])])]),_:1}),e(p),e(w,null,{default:i(()=>[e(m,{label:"Enviar",icon:"send",type:"submit",color:"primary",flat:"",class:"q-ml-sm",onClick:t[2]||(t[2]=a=>d.AddCargo())}),e(m,{label:"Cancelar",icon:"cancel",type:"reset",color:"primary",flat:"",class:"q-ml-sm",onClick:t[3]||(t[3]=a=>d.ClosedNewCargo())})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),l("template",null,[l("div",J,[e(v,{modelValue:s.editCargo,"onUpdate:modelValue":t[10]||(t[10]=a=>s.editCargo=a),persistent:""},{default:i(()=>[e(y,{class:"my-card",flat:"",bordered:""},{default:i(()=>[e(g,null,{default:i(()=>[G]),_:1}),e(p),e(g,null,{default:i(()=>[l("div",H,[e(u,{filled:"",modelValue:s.cargo.name,"onUpdate:modelValue":t[5]||(t[5]=a=>s.cargo.name=a),label:"Nombre *",hint:"Nombre Del Cargo","lazy-rules":"",rules:[a=>a&&a.length>0||"Debe introducir un Cargo"]},null,8,["modelValue","rules"]),e(u,{modelValue:s.cargo.descripcion,"onUpdate:modelValue":t[6]||(t[6]=a=>s.cargo.descripcion=a),filled:"",type:"textarea",hint:"Descripcion del Cargo",label:"Descripcion"},null,8,["modelValue"])])]),_:1}),e(p),e(w,null,{default:i(()=>[e(m,{label:"Enviar",icon:"send",type:"submit",color:"primary",flat:"",class:"q-ml-sm",onClick:t[7]||(t[7]=a=>d.EditCargo())}),e(m,{label:"Eliminar",icon:"delete",type:"submit",color:"negative",flat:"",class:"q-ml-sm",onClick:t[8]||(t[8]=a=>r.confirm=!0)}),e(m,{label:"Cerrar",icon:"cancel",type:"cancel",color:"primary",flat:"",class:"q-ml-sm",onClick:t[9]||(t[9]=a=>d.ClosedEditCargo())})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),e(T,{position:"top-right",offset:[18,18]},{default:i(()=>[Q((q(),V(B,{icon:"add",direction:"down",color:"primary",disable:o.draggingFab},{default:i(()=>[e(_,{onClick:t[11]||(t[11]=a=>d.exportTable()),color:"positive",icon:"download",disable:o.draggingFab},{default:i(()=>[e(k,null,{default:i(()=>[c(" Descargar ")]),_:1})]),_:1},8,["disable"]),e(_,{onClick:t[12]||(t[12]=a=>d.OpenNewCargo()),color:"positive",icon:"add_box",disable:o.draggingFab},{default:i(()=>[e(k,null,{default:i(()=>[c(" Nuevo ")]),_:1})]),_:1},8,["disable"])]),_:1},8,["disable"])),[[z,o.moveFab,void 0,{prevent:!0,mouse:!0}]])]),_:1}),l("template",null,[l("div",K,[e(v,{modelValue:r.confirm,"onUpdate:modelValue":t[14]||(t[14]=a=>r.confirm=a),persistent:""},{default:i(()=>[e(y,null,{default:i(()=>[e(g,{class:"row items-center"},{default:i(()=>[e(A,{icon:"priority_high",color:"primary","text-color":"white"}),W]),_:1}),e(w,{align:"right"},{default:i(()=>[Q(e(m,{label:"Cancelar",icon:"cancel",type:"cancel",color:"primary",flat:"",class:"q-ml-sm"},null,512),[[F]]),e(m,{label:"Eliminar",icon:"delete",type:"submit",color:"negative",flat:"",class:"q-ml-sm",onClick:t[13]||(t[13]=a=>d.DeleteCargo())})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),_:1})}var fe=E(j,[["render",X]]);export{fe as default};
