import{Q as E,a as V,b as k}from"./QTable.54a77e6e.js";import{_ as x,n as N,o as y,c as v,w as s,f as l,a as e,e as g,aw as A,N as h,J as m,af as u,M as p,ax as T,ah as q,Q as B}from"./index.ef228992.js";import{Q as w}from"./QInput.a2bee355.js";import{Q as b}from"./QCardActions.bed2bb53.js";import{Q as D,a as C,b as _,c as U}from"./QPageSticky.a179ccb3.js";import{Q as S}from"./QPage.2fc420a1.js";import{T as $}from"./TouchPan.9047fff0.js";import{C as z}from"./ClosePopup.6197016b.js";import{api as c}from"./axios.23aa70c0.js";import{e as F}from"./export-file.dc78ba05.js";import{u as L}from"./use-quasar.38626e8f.js";import{a as f}from"./authenticate.bcdfbf4f.js";import"./format.6bd9982d.js";import"./use-key-composition.25c6204a.js";import"./QItemLabel.1cc16253.js";import"./js.cookie.f93afda9.js";function Q(o,t,r){let a=t!==void 0?t(o,r):o;return a=a==null?"":String(a),a=a.split('"').join('""'),`"${a}"`}const P=L(),j={name:"TipoEquipoPage",data(){return{newTipo:!1,editTipo:!1,rows:[],columns:[{label:"Nombre",name:"name",required:!0,align:"center",field:o=>o.name,format:o=>`${o}`,sortable:!0}],tipos:[],tipo:{name:""},ideselected:0}},components:{},methods:{loadTipo(){c.get("/tipo-equipo/",{headers:{Authorization:`Bearer ${f.getUserLogged()}`}}).then(o=>{this.rows=o.data}).catch(o=>this.$q.notify({type:"negative",position:"top",message:o.response.data.message}))},OpenNewTipo(){this.tipo.name="",this.newTipo=!0},ClosedNewTipo(){this.tipo.name="",this.newTipo=!1},async AddTipo(){this.tipo.name!==""?(await c.post("/tipo-equipo/",this.tipo,{headers:{Authorization:`Bearer ${f.getUserLogged()}`}}).then(o=>{this.$q.notify({color:"positive",position:"top",message:"Se inserto el Tipo de Equipo "+o.data.name,icon:"done"})}).catch(o=>this.$q.notify({type:"negative",position:"top",message:o.response.data.message})),this.newTipo=!1,this.loadTipo()):this.$q.notify({color:"negative",position:"top",message:"Llene los capos requeridos",icon:"report_problem"})},OpenEdit(){this.editTipo=!0},async EditTipo(){this.tipo.name!==""?(await c.patch("/tipo-equipo/"+this.idselected,this.tipo,{headers:{Authorization:`Bearer ${f.getUserLogged()}`}}).then(o=>{this.$q.notify({color:"positive",position:"top",message:"Se Modifico El Tipo de Equipo "+o.data.name,icon:"done"})}).catch(o=>this.$q.notify({type:"negative",position:"top",message:o.response.data.message})),this.editTipo=!1,this.loadTipo()):this.$q.notify({color:"negative",position:"top",message:"Llene los capos requeridos",icon:"report_problem"})},ClosedEditTipo(){this.tipo={},this.editTipo=!1},async DeleteTipo(){await c.delete("/tipo-equipo/"+this.idselected,{headers:{Authorization:`Bearer ${f.getUserLogged()}`}}).then(o=>{this.$q.notify({color:"positive",position:"top",message:"Se Elimino El Tipo de Equipo "+o.data.name,icon:"done"})}).catch(o=>this.$q.notify({type:"negative",position:"top",message:o.response.data.message})),this.confirm=!1,this.editTipo=!1,this.loadTipo()},onRowClick(o){this.tipo.name=o.name,this.idselected=o.id,this.editTipo=!0},exportTable(){const o=[this.columns.map(r=>Q(r.label))].concat(this.rows.map(r=>this.columns.map(a=>Q(typeof a.field=="function"?a.field(r):r[a.field===void 0?a.name:a.field],a.format,r)).join(","))).join(`\r
`);F("table-export.csv",o,"text/csv")!==!0&&P.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}},mounted(){this.loadTipo()},setup(){return{confirm:N(!1)}}},O={class:"q-pa-md"},M={class:"q-pa-md q-gutter-sm"},R=l("div",{class:"text-h6"},"Nuevo Tipo",-1),I={class:"q-pt-none",style:{"max-width":"700px"}},J={class:"q-pa-md q-gutter-sm"},G=l("div",{class:"text-h6"},"Editar Tipo de Equipo",-1),H={class:"q-pt-none",style:{"max-width":"700px"}},K={class:"q-pa-md q-gutter-sm"},W=l("span",{class:"q-ml-sm"},"Desea eliminar El Tipo de Equipo?.",-1);function X(o,t,r,a,n,d){return y(),v(S,{class:"q-pa-md"},{default:s(()=>[l("div",O,[e(k,{flat:"",bordered:"",title:"Tipos de Equipos",rows:n.rows,columns:n.columns,color:"primary","row-key":"name"},{body:s(i=>[e(E,{props:i,onClick:Y=>d.onRowClick(i.row)},{default:s(()=>[e(V,{key:"name",props:i},{default:s(()=>[g(A(i.row.name),1)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["rows","columns"])]),l("template",null,[l("div",M,[e(T,{modelValue:n.newTipo,"onUpdate:modelValue":t[3]||(t[3]=i=>n.newTipo=i),persistent:""},{default:s(()=>[e(h,{class:"my-card",flat:"",bordered:""},{default:s(()=>[e(m,null,{default:s(()=>[R]),_:1}),e(u),e(m,null,{default:s(()=>[l("div",I,[e(w,{filled:"",modelValue:n.tipo.name,"onUpdate:modelValue":t[0]||(t[0]=i=>n.tipo.name=i),label:"Nombre *","lazy-rules":"",rules:[i=>i&&i.length>0||"Debe introducir un Nombre"]},null,8,["modelValue","rules"])])]),_:1}),e(u),e(b,null,{default:s(()=>[e(p,{label:"Enviar",icon:"send",type:"submit",color:"primary",flat:"",class:"q-ml-sm",onClick:t[1]||(t[1]=i=>d.AddTipo())}),e(p,{label:"Cancelar",icon:"cancel",type:"reset",color:"primary",flat:"",class:"q-ml-sm",onClick:t[2]||(t[2]=i=>d.ClosedNewTipo())})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),l("template",null,[l("div",J,[e(T,{modelValue:n.editTipo,"onUpdate:modelValue":t[8]||(t[8]=i=>n.editTipo=i),persistent:""},{default:s(()=>[e(h,{class:"my-card",flat:"",bordered:""},{default:s(()=>[e(m,null,{default:s(()=>[G]),_:1}),e(u),e(m,null,{default:s(()=>[l("div",H,[e(w,{filled:"",modelValue:n.tipo.name,"onUpdate:modelValue":t[4]||(t[4]=i=>n.tipo.name=i),label:"Nombre *","lazy-rules":"",rules:[i=>i&&i.length>0||"Debe introducir un Nombre"]},null,8,["modelValue","rules"])])]),_:1}),e(u),e(b,null,{default:s(()=>[e(p,{label:"Enviar",icon:"send",type:"submit",color:"primary",flat:"",class:"q-ml-sm",onClick:t[5]||(t[5]=i=>d.EditTipo())}),e(p,{label:"Eliminar",icon:"delete",type:"submit",color:"negative",flat:"",class:"q-ml-sm",onClick:t[6]||(t[6]=i=>a.confirm=!0)}),e(p,{label:"Cerrar",icon:"cancel",type:"cancel",color:"primary",flat:"",class:"q-ml-sm",onClick:t[7]||(t[7]=i=>d.ClosedEditTipo())})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),e(U,{position:"top-right",offset:[18,18]},{default:s(()=>[q((y(),v(D,{icon:"add",direction:"down",color:"primary",disable:o.draggingFab},{default:s(()=>[e(C,{onClick:t[9]||(t[9]=i=>d.exportTable()),color:"positive",icon:"download",disable:o.draggingFab},{default:s(()=>[e(_,null,{default:s(()=>[g(" Descargar ")]),_:1})]),_:1},8,["disable"]),e(C,{onClick:t[10]||(t[10]=i=>d.OpenNewTipo()),color:"positive",icon:"add_box",disable:o.draggingFab},{default:s(()=>[e(_,null,{default:s(()=>[g(" Nuevo ")]),_:1})]),_:1},8,["disable"])]),_:1},8,["disable"])),[[$,o.moveFab,void 0,{prevent:!0,mouse:!0}]])]),_:1}),l("template",null,[l("div",K,[e(T,{modelValue:a.confirm,"onUpdate:modelValue":t[12]||(t[12]=i=>a.confirm=i),persistent:""},{default:s(()=>[e(h,null,{default:s(()=>[e(m,{class:"row items-center"},{default:s(()=>[e(B,{icon:"priority_high",color:"primary","text-color":"white"}),W]),_:1}),e(b,{align:"right"},{default:s(()=>[q(e(p,{label:"Cancelar",icon:"cancel",type:"cancel",color:"primary",flat:"",class:"q-ml-sm"},null,512),[[z]]),e(p,{label:"Eliminar",icon:"delete",type:"submit",color:"negative",flat:"",class:"q-ml-sm",onClick:t[11]||(t[11]=i=>d.DeleteTipo())})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),_:1})}var ge=x(j,[["render",X]]);export{ge as default};
