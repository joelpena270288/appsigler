import{Q as g,a as s,b as h}from"./QTable.54a77e6e.js";import{_ as w,n as m,o as f,c as p,w as a,f as _,a as r,e as i,aw as l,L as y,ah as v}from"./index.ef228992.js";import{Q as C}from"./QInput.a2bee355.js";import{Q as k,a as Q,b as F,c as q}from"./QPageSticky.a179ccb3.js";import{Q as P}from"./QPage.2fc420a1.js";import{T as $}from"./TouchPan.9047fff0.js";import{api as T}from"./axios.23aa70c0.js";import{e as V}from"./export-file.dc78ba05.js";import{u as x}from"./use-quasar.38626e8f.js";import{a as A}from"./authenticate.bcdfbf4f.js";import{h as B}from"./moment.9709ab41.js";import"./format.6bd9982d.js";import"./use-key-composition.25c6204a.js";import"./QItemLabel.1cc16253.js";import"./js.cookie.f93afda9.js";function b(e,c,n){let t=c!==void 0?c(e,n):e;return t=t==null?"":String(t),t=t.split('"').join('""'),`"${t}"`}const D=x(),M={name:"CuentasPorCobrarPage",data(){return{rows:[],columns:[{label:"Consecutivo Factura",name:"consecutivofactura",required:!0,align:"center",field:e=>e.consecutivofactura,format:e=>`${e}`,sortable:!0},{label:"Proyecto",name:"nombreproyecto",required:!0,align:"lefth",field:e=>e.nombreproyecto,format:e=>`${e}`,sortable:!0},{label:"Cliente",name:"cliente",required:!0,align:"lefth",field:e=>e.cliente.nombre,format:e=>`${e}`,sortable:!0},{label:"Fecha",name:"createdAt",required:!0,align:"center",field:e=>e.createdAt,format:e=>`${e}`,sortable:!0},{label:"Monto de la Factura",name:"montoinicial",required:!0,align:"center",field:e=>e.cuentaporcobrar.montoinicial,format:e=>`${e}`,sortable:!0},{label:"Monto Pendiente a Cobrar ",name:"montorestante",required:!0,align:"center",field:e=>e.cuentaporcobrar.montorestante,format:e=>`${e}`,sortable:!0}]}},components:{},methods:{async loadFactura(){await T.get("/factura/cuentasporcobrar/get/",{headers:{Authorization:`Bearer ${A.getUserLogged()}`}}).then(e=>{this.rows=e.data}).catch(e=>this.$q.notify({type:"negative",position:"top",message:e.response.data.message}))},onRowClick(e){this.$router.push({path:"/pagos/"+e.id,params:{idfactura:e.id}})},OpenNewConduce(){this.$router.push("/newconduce")},FormatoFecha(e){return B(String(e)).format("MM/DD/YYYY hh:mm")},exportTable(){const e=[this.columns.map(n=>b(n.label))].concat(this.rows.map(n=>this.columns.map(t=>b(typeof t.field=="function"?t.field(n):n[t.field===void 0?t.name:t.field],t.format,n)).join(","))).join(`\r
`);V("Listado_Cuenta_Por_Cobrar.csv",e,"text/csv")!==!0&&D.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}},mounted(){this.loadFactura()},setup(){return{confirm:m(!1),filter:m("")}}},N={class:"q-pa-md"};function S(e,c,n,t,d,u){return f(),p(P,{class:"q-pa-md"},{default:a(()=>[_("div",N,[r(h,{flat:"",bordered:"",title:"Cuentas por Cobrar",rows:d.rows,columns:d.columns,color:"primary","row-key":"name"},{body:a(o=>[r(g,{props:o,onClick:Y=>u.onRowClick(o.row)},{default:a(()=>[r(s,{key:"consecutivofactura",props:o},{default:a(()=>[i(l(o.row.consecutivofactura),1)]),_:2},1032,["props"]),r(s,{key:"tipo",props:o},{default:a(()=>[i(l(o.row.tipo),1)]),_:2},1032,["props"]),r(s,{key:"nombreproyecto",props:o},{default:a(()=>[i(l(o.row.nombreproyecto),1)]),_:2},1032,["props"]),r(s,{key:"cliente",props:o},{default:a(()=>[i(l(o.row.cliente.nombre),1)]),_:2},1032,["props"]),r(s,{key:"createdAt",props:o},{default:a(()=>[i(l(u.FormatoFecha(o.row.createdAt)),1)]),_:2},1032,["props"]),r(s,{key:"montoinicial",props:o},{default:a(()=>[i(l(o.row.cuentaporcobrar.montoinicial),1)]),_:2},1032,["props"]),r(s,{key:"montorestante",props:o},{default:a(()=>[i(l(o.row.cuentaporcobrar.montorestante),1)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),"top-right":a(()=>[r(C,{borderless:"",dense:"",debounce:"300",modelValue:t.filter,"onUpdate:modelValue":c[0]||(c[0]=o=>t.filter=o),placeholder:"Buscar"},{append:a(()=>[r(y,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","columns"])]),r(q,{position:"top-right",offset:[18,18]},{default:a(()=>[v((f(),p(k,{icon:"add",direction:"down",color:"primary",disable:e.draggingFab},{default:a(()=>[r(Q,{onClick:u.exportTable,color:"positive",icon:"download",disable:e.draggingFab},{default:a(()=>[r(F,null,{default:a(()=>[i(" Descargar ")]),_:1})]),_:1},8,["onClick","disable"])]),_:1},8,["disable"])),[[$,e.moveFab,void 0,{prevent:!0,mouse:!0}]])]),_:1})]),_:1})}var ee=w(M,[["render",S]]);export{ee as default};
