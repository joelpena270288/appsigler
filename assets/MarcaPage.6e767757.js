import{Q as V,a as k,b as x}from"./QTable.54a77e6e.js";import{_ as N,n as E,o as v,c as M,w as s,f as i,a as e,e as g,aw as A,N as h,J as c,af as p,M as m,ax as b,ah as w,Q as B}from"./index.ef228992.js";import{Q as q}from"./QInput.a2bee355.js";import{Q as y}from"./QCardActions.bed2bb53.js";import{Q as D,a as C,b as _,c as T}from"./QPageSticky.a179ccb3.js";import{Q as U}from"./QPage.2fc420a1.js";import{T as L}from"./TouchPan.9047fff0.js";import{C as S}from"./ClosePopup.6197016b.js";import{api as u}from"./axios.23aa70c0.js";import{e as $}from"./export-file.dc78ba05.js";import{u as z}from"./use-quasar.38626e8f.js";import{a as f}from"./authenticate.bcdfbf4f.js";import"./format.6bd9982d.js";import"./use-key-composition.25c6204a.js";import"./QItemLabel.1cc16253.js";import"./js.cookie.f93afda9.js";function Q(a,t,n){let r=t!==void 0?t(a,n):a;return r=r==null?"":String(r),r=r.split('"').join('""'),`"${r}"`}const F=z(),P={name:"MarcaPage",data(){return{newMarca:!1,editMarca:!1,rows:[],columns:[{label:"Marca",name:"name",required:!0,align:"center",field:a=>a.name,format:a=>`${a}`,sortable:!0}],marcas:[],marca:{name:""},ideselected:0}},components:{},methods:{loadMarca(){u.get("/marca/",{headers:{Authorization:`Bearer ${f.getUserLogged()}`}}).then(a=>{this.rows=a.data}).catch(a=>this.$q.notify({type:"negative",position:"top",message:a.response.data.message}))},OpenNewMarca(){this.marca.name="",this.newMarca=!0},ClosedNewMarca(){this.marca.name="",this.newMarca=!1},async AddMarca(){this.marca.name!==""?(await u.post("/marca/",this.marca,{headers:{Authorization:`Bearer ${f.getUserLogged()}`}}).then(a=>{this.$q.notify({color:"positive",position:"top",message:"Se inserto la marca "+a.data.name,icon:"done"})}).catch(a=>this.$q.notify({type:"negative",position:"top",message:a.response.data.message})),this.newMarca=!1,this.loadMarca()):this.$q.notify({color:"negative",position:"top",message:"Llene los capos requeridos",icon:"report_problem"})},OpenEdit(){this.editMarca=!0},async EditMarca(){this.marca.name!==""?(await u.patch("/marca/"+this.idselected,this.marca,{headers:{Authorization:`Bearer ${f.getUserLogged()}`}}).then(a=>{this.$q.notify({color:"positive",position:"top",message:"Se Modifico la Marca "+a.data.name,icon:"done"})}).catch(a=>this.$q.notify({type:"negative",position:"top",message:a.response.data.message})),this.editMarca=!1,this.loadMarca()):this.$q.notify({color:"negative",position:"top",message:"Llene los capos requeridos",icon:"report_problem"})},ClosedEditMarca(){this.marca={},this.editMarca=!1},async DeleteMarca(){await u.delete("/marca/"+this.idselected,{headers:{Authorization:`Bearer ${f.getUserLogged()}`}}).then(a=>{this.$q.notify({color:"positive",position:"top",message:"Se Elimino La marca "+a.data.name,icon:"done"})}).catch(a=>this.$q.notify({type:"negative",position:"top",message:a.response.data.message})),this.confirm=!1,this.editMarca=!1,this.loadMarca()},onRowClick(a){this.marca.name=a.name,this.idselected=a.id,this.editMarca=!0},exportTable(){const a=[this.columns.map(n=>Q(n.label))].concat(this.rows.map(n=>this.columns.map(r=>Q(typeof r.field=="function"?r.field(n):n[r.field===void 0?r.name:r.field],r.format,n)).join(","))).join(`\r
`);$("table-export.csv",a,"text/csv")!==!0&&F.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}},mounted(){this.loadMarca()},setup(){return{confirm:E(!1)}}},j={class:"q-pa-md"},O={class:"q-pa-md q-gutter-sm"},R=i("div",{class:"text-h6"},"Nueva Marca",-1),I={class:"q-pt-none",style:{"max-width":"700px"}},J={class:"q-pa-md q-gutter-sm"},G=i("div",{class:"text-h6"},"Editar Marca",-1),H={class:"q-pt-none",style:{"max-width":"700px"}},K={class:"q-pa-md q-gutter-sm"},W=i("span",{class:"q-ml-sm"},"Desea eliminar La Marca?.",-1);function X(a,t,n,r,l,d){return v(),M(U,{class:"q-pa-md"},{default:s(()=>[i("div",j,[e(x,{flat:"",bordered:"",title:"Marcas",rows:l.rows,columns:l.columns,color:"primary","row-key":"name"},{body:s(o=>[e(V,{props:o,onClick:Y=>d.onRowClick(o.row)},{default:s(()=>[e(k,{key:"name",props:o},{default:s(()=>[g(A(o.row.name),1)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["rows","columns"])]),i("template",null,[i("div",O,[e(b,{modelValue:l.newMarca,"onUpdate:modelValue":t[3]||(t[3]=o=>l.newMarca=o),persistent:""},{default:s(()=>[e(h,{class:"my-card",flat:"",bordered:""},{default:s(()=>[e(c,null,{default:s(()=>[R]),_:1}),e(p),e(c,null,{default:s(()=>[i("div",I,[e(q,{filled:"",modelValue:l.marca.name,"onUpdate:modelValue":t[0]||(t[0]=o=>l.marca.name=o),label:"Nombre *",hint:"Nombre de la marca","lazy-rules":"",rules:[o=>o&&o.length>0||"Debe introducir una Marca"]},null,8,["modelValue","rules"])])]),_:1}),e(p),e(y,null,{default:s(()=>[e(m,{label:"Enviar",icon:"send",type:"submit",color:"primary",flat:"",class:"q-ml-sm",onClick:t[1]||(t[1]=o=>d.AddMarca())}),e(m,{label:"Cancelar",icon:"cancel",type:"reset",color:"primary",flat:"",class:"q-ml-sm",onClick:t[2]||(t[2]=o=>d.ClosedNewMarca())})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),i("template",null,[i("div",J,[e(b,{modelValue:l.editMarca,"onUpdate:modelValue":t[8]||(t[8]=o=>l.editMarca=o),persistent:""},{default:s(()=>[e(h,{class:"my-card",flat:"",bordered:""},{default:s(()=>[e(c,null,{default:s(()=>[G]),_:1}),e(p),e(c,null,{default:s(()=>[i("div",H,[e(q,{filled:"",modelValue:l.marca.name,"onUpdate:modelValue":t[4]||(t[4]=o=>l.marca.name=o),label:"Nombre *",hint:"Nombre de la marca","lazy-rules":"",rules:[o=>o&&o.length>0||"Debe introducir una Marca"]},null,8,["modelValue","rules"])])]),_:1}),e(p),e(y,null,{default:s(()=>[e(m,{label:"Enviar",icon:"send",type:"submit",color:"primary",flat:"",class:"q-ml-sm",onClick:t[5]||(t[5]=o=>d.EditMarca())}),e(m,{label:"Eliminar",icon:"delete",type:"submit",color:"negative",flat:"",class:"q-ml-sm",onClick:t[6]||(t[6]=o=>r.confirm=!0)}),e(m,{label:"Cerrar",icon:"cancel",type:"cancel",color:"primary",flat:"",class:"q-ml-sm",onClick:t[7]||(t[7]=o=>d.ClosedEditMarca())})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),e(T,{position:"top-right",offset:[18,18]},{default:s(()=>[w((v(),M(D,{icon:"add",direction:"down",color:"primary",disable:a.draggingFab},{default:s(()=>[e(C,{onClick:t[9]||(t[9]=o=>d.exportTable()),color:"positive",icon:"download",disable:a.draggingFab},{default:s(()=>[e(_,null,{default:s(()=>[g(" Descargar ")]),_:1})]),_:1},8,["disable"]),e(C,{onClick:t[10]||(t[10]=o=>d.OpenNewMarca()),color:"positive",icon:"add_box",disable:a.draggingFab},{default:s(()=>[e(_,null,{default:s(()=>[g(" Nuevo ")]),_:1})]),_:1},8,["disable"])]),_:1},8,["disable"])),[[L,a.moveFab,void 0,{prevent:!0,mouse:!0}]])]),_:1}),i("template",null,[i("div",K,[e(b,{modelValue:r.confirm,"onUpdate:modelValue":t[12]||(t[12]=o=>r.confirm=o),persistent:""},{default:s(()=>[e(h,null,{default:s(()=>[e(c,{class:"row items-center"},{default:s(()=>[e(B,{icon:"priority_high",color:"primary","text-color":"white"}),W]),_:1}),e(y,{align:"right"},{default:s(()=>[w(e(m,{label:"Cancelar",icon:"cancel",type:"cancel",color:"primary",flat:"",class:"q-ml-sm"},null,512),[[S]]),e(m,{label:"Eliminar",icon:"delete",type:"submit",color:"negative",flat:"",class:"q-ml-sm",onClick:t[11]||(t[11]=o=>d.DeleteMarca())})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),_:1})}var ge=N(P,[["render",X]]);export{ge as default};
