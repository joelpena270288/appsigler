import{Q as x,a as M,b as E}from"./QTable.54a77e6e.js";import{_ as N,n as U,o as w,c as q,w as l,f as i,a as e,e as p,aw as C,N as h,J as u,af as f,M as m,ax as b,ah as V,Q as T}from"./index.ef228992.js";import{Q as c}from"./QInput.a2bee355.js";import{Q as y}from"./QCardActions.bed2bb53.js";import{Q as A,a as k,b as Q,c as B}from"./QPageSticky.a179ccb3.js";import{Q as D}from"./QPage.2fc420a1.js";import{T as S}from"./TouchPan.9047fff0.js";import{C as L}from"./ClosePopup.6197016b.js";import{api as g}from"./axios.23aa70c0.js";import{e as z}from"./export-file.dc78ba05.js";import{u as F}from"./use-quasar.38626e8f.js";import{a as v}from"./authenticate.bcdfbf4f.js";import"./format.6bd9982d.js";import"./use-key-composition.25c6204a.js";import"./QItemLabel.1cc16253.js";import"./js.cookie.f93afda9.js";function _(a,o,d){let s=o!==void 0?o(a,d):a;return s=s==null?"":String(s),s=s.split('"').join('""'),`"${s}"`}const P=F(),$={name:"MonedaPage",data(){return{newMoneda:!1,editMoneda:!1,rows:[],columns:[{label:"Moneda",name:"valor",required:!0,align:"center",field:a=>a.valor,format:a=>`${a}`,sortable:!0},{label:"Tasa",name:"tasa",required:!0,align:"center",field:a=>a.tasa,format:a=>`${a}`,sortable:!0}],monedas:[],moneda:{valor:"",tasa:0},ideselected:0}},components:{},methods:{loadMoneda(){g.get("/moneda/",{headers:{Authorization:`Bearer ${v.getUserLogged()}`}}).then(a=>{this.rows=a.data}).catch(a=>this.$q.notify({type:"negative",position:"top",message:a.response.data.message}))},OpenNewMoneda(){this.moneda.valor="",this.moneda.tasa=0,this.newMoneda=!0},ClosedNewMoneda(){this.moneda.valor="",this.moneda.tasa=0,this.newMoneda=!1},async AddMoneda(){this.moneda.valor!==""&&this.moneda.tasa!==""?(await g.post("/moneda/",this.moneda,{headers:{Authorization:`Bearer ${v.getUserLogged()}`}}).then(a=>{this.$q.notify({color:"positive",position:"top",message:"Se inserto la moneda "+a.data.valor,icon:"done"})}).catch(a=>this.$q.notify({type:"negative",position:"top",message:a.response.data.message})),this.newMoneda=!1,this.loadMoneda()):this.$q.notify({color:"negative",position:"top",message:"Llene los capos requeridos",icon:"report_problem"})},OpenEdit(){this.editMoneda=!0},async EditMoneda(){this.moneda.valor!==""?(await g.patch("/moneda/"+this.idselected,this.moneda,{headers:{Authorization:`Bearer ${v.getUserLogged()}`}}).then(a=>{this.$q.notify({color:"positive",position:"top",message:"Se Modifico la Moneda "+a.data.moneda,icon:"done"})}).catch(a=>this.$q.notify({type:"negative",position:"top",message:a.response.data.message})),this.editMoneda=!1,this.loadMoneda()):this.$q.notify({color:"negative",position:"top",message:"Llene los capos requeridos",icon:"report_problem"})},ClosedEditMoneda(){this.moneda={},this.editMoneda=!1},async Deletemoneda(){await g.delete("/moneda/"+this.idselected,{headers:{Authorization:`Bearer ${v.getUserLogged()}`}}).then(a=>{this.$q.notify({color:"positive",position:"top",message:"Se Elimino La moneda "+a.data.value,icon:"done"})}).catch(a=>this.$q.notify({type:"negative",position:"top",message:a.response.data.message})),this.confirm=!1,this.editMoneda=!1,this.loadMoneda()},onRowClick(a){this.moneda.valor=a.valor,this.moneda.tasa=a.tasa,this.idselected=a.id,this.editMoneda=!0},exportTable(){const a=[this.columns.map(d=>_(d.label))].concat(this.rows.map(d=>this.columns.map(s=>_(typeof s.field=="function"?s.field(d):d[s.field===void 0?s.name:s.field],s.format,d)).join(","))).join(`\r
`);z("table-export.csv",a,"text/csv")!==!0&&P.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}},mounted(){this.loadMoneda()},setup(){return{confirm:U(!1)}}},j={class:"q-pa-md"},O={class:"q-pa-md q-gutter-sm"},R=i("div",{class:"text-h6"},"Nueva Moneda",-1),I={class:"q-pt-none",style:{"max-width":"700px"}},J={class:"q-pa-md q-gutter-sm"},G=i("div",{class:"text-h6"},"Editar Moneda",-1),H={class:"q-pt-none",style:{"max-width":"700px"}},K={class:"q-pa-md q-gutter-sm"},W=i("span",{class:"q-ml-sm"},"Desea eliminar La Moneda?.",-1);function X(a,o,d,s,n,r){return w(),q(D,{class:"q-pa-md"},{default:l(()=>[i("div",j,[e(E,{flat:"",bordered:"",title:"Modendas",rows:n.rows,columns:n.columns,color:"primary","row-key":"name"},{body:l(t=>[e(x,{props:t,onClick:Y=>r.onRowClick(t.row)},{default:l(()=>[e(M,{key:"valor",props:t},{default:l(()=>[p(C(t.row.valor),1)]),_:2},1032,["props"]),e(M,{key:"tasa",props:t},{default:l(()=>[p(C(t.row.tasa),1)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["rows","columns"])]),i("template",null,[i("div",O,[e(b,{modelValue:n.newMoneda,"onUpdate:modelValue":o[4]||(o[4]=t=>n.newMoneda=t),persistent:""},{default:l(()=>[e(h,{class:"my-card",flat:"",bordered:""},{default:l(()=>[e(u,null,{default:l(()=>[R]),_:1}),e(f),e(u,null,{default:l(()=>[i("div",I,[e(c,{filled:"",modelValue:n.moneda.valor,"onUpdate:modelValue":o[0]||(o[0]=t=>n.moneda.valor=t),label:"Simbolo *","lazy-rules":"",rules:[t=>t&&t.length>0||"Debe introducir una Moneda"]},null,8,["modelValue","rules"]),e(c,{filled:"",modelValue:n.moneda.tasa,"onUpdate:modelValue":o[1]||(o[1]=t=>n.moneda.tasa=t),label:"valor",mask:"#.##","fill-mask":"0","reverse-fill-mask":"","input-class":"text-right"},null,8,["modelValue"])])]),_:1}),e(f),e(y,null,{default:l(()=>[e(m,{label:"Enviar",icon:"send",type:"submit",color:"primary",flat:"",class:"q-ml-sm",onClick:o[2]||(o[2]=t=>r.AddMoneda())}),e(m,{label:"Cancelar",icon:"cancel",type:"reset",color:"primary",flat:"",class:"q-ml-sm",onClick:o[3]||(o[3]=t=>r.ClosedNewMoneda())})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),i("template",null,[i("div",J,[e(b,{modelValue:n.editMoneda,"onUpdate:modelValue":o[10]||(o[10]=t=>n.editMoneda=t),persistent:""},{default:l(()=>[e(h,{class:"my-card",flat:"",bordered:""},{default:l(()=>[e(u,null,{default:l(()=>[G]),_:1}),e(f),e(u,null,{default:l(()=>[i("div",H,[e(c,{filled:"",modelValue:n.moneda.valor,"onUpdate:modelValue":o[5]||(o[5]=t=>n.moneda.valor=t),label:"Moneda *",hint:"Nombre de la Moneda","lazy-rules":"",rules:[t=>t&&t.length>0||"Debe introducir una Marca"]},null,8,["modelValue","rules"]),e(c,{filled:"",modelValue:n.moneda.tasa,"onUpdate:modelValue":o[6]||(o[6]=t=>n.moneda.tasa=t),label:"valor",mask:"#.##","fill-mask":"0","reverse-fill-mask":"","input-class":"text-right"},null,8,["modelValue"])])]),_:1}),e(f),e(y,null,{default:l(()=>[e(m,{label:"Enviar",icon:"send",type:"submit",color:"primary",flat:"",class:"q-ml-sm",onClick:o[7]||(o[7]=t=>r.EditMoneda())}),e(m,{label:"Eliminar",icon:"delete",type:"submit",color:"negative",flat:"",class:"q-ml-sm",onClick:o[8]||(o[8]=t=>s.confirm=!0)}),e(m,{label:"Cerrar",icon:"cancel",type:"cancel",color:"primary",flat:"",class:"q-ml-sm",onClick:o[9]||(o[9]=t=>r.ClosedEditMoneda())})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),e(B,{position:"top-right",offset:[18,18]},{default:l(()=>[V((w(),q(A,{icon:"add",direction:"down",color:"primary",disable:a.draggingFab},{default:l(()=>[e(k,{onClick:o[11]||(o[11]=t=>r.exportTable()),color:"positive",icon:"download",disable:a.draggingFab},{default:l(()=>[e(Q,null,{default:l(()=>[p(" Descargar ")]),_:1})]),_:1},8,["disable"]),e(k,{onClick:o[12]||(o[12]=t=>r.OpenNewMoneda()),color:"positive",icon:"add_box",disable:a.draggingFab},{default:l(()=>[e(Q,null,{default:l(()=>[p(" Nuevo ")]),_:1})]),_:1},8,["disable"])]),_:1},8,["disable"])),[[S,a.moveFab,void 0,{prevent:!0,mouse:!0}]])]),_:1}),i("template",null,[i("div",K,[e(b,{modelValue:s.confirm,"onUpdate:modelValue":o[14]||(o[14]=t=>s.confirm=t),persistent:""},{default:l(()=>[e(h,null,{default:l(()=>[e(u,{class:"row items-center"},{default:l(()=>[e(T,{icon:"priority_high",color:"primary","text-color":"white"}),W]),_:1}),e(y,{align:"right"},{default:l(()=>[V(e(m,{label:"Cancelar",icon:"cancel",type:"cancel",color:"primary",flat:"",class:"q-ml-sm"},null,512),[[L]]),e(m,{label:"Eliminar",icon:"delete",type:"submit",color:"negative",flat:"",class:"q-ml-sm",onClick:o[13]||(o[13]=t=>a.DeleteMoneda())})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),_:1})}var ge=N($,[["render",X]]);export{ge as default};
