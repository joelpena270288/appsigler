import{Q as b,a as s,b as h}from"./QTable.54a77e6e.js";import{_ as w,n as c,o as f,c as p,w as t,f as C,a as o,e as i,aw as l,L as _,ah as k}from"./index.ef228992.js";import{Q as y}from"./QInput.a2bee355.js";import{Q as N,a as P,b as F,c as v}from"./QPageSticky.a179ccb3.js";import{Q}from"./QPage.2fc420a1.js";import{T as q}from"./TouchPan.9047fff0.js";import{api as $}from"./axios.23aa70c0.js";import{e as T}from"./export-file.dc78ba05.js";import{u as R}from"./use-quasar.38626e8f.js";import{a as V}from"./authenticate.bcdfbf4f.js";import{h as x}from"./moment.9709ab41.js";import"./format.6bd9982d.js";import"./use-key-composition.25c6204a.js";import"./QItemLabel.1cc16253.js";import"./js.cookie.f93afda9.js";function g(e,d,n){let r=d!==void 0?d(e,n):e;return r=r==null?"":String(r),r=r.split('"').join('""'),`"${r}"`}const A=R(),B={name:"CuentasPorPagarPage",data(){return{rows:[],columns:[{label:"Nombre provedor",name:"Nombre",required:!0,align:"center",field:e=>e.Nombre,format:e=>`${e}`,sortable:!0},{label:"NCF",name:"NCF",required:!0,align:"center",field:e=>e.NCF,format:e=>`${e}`,sortable:!0},{label:"Factura",name:"factura",required:!0,align:"center",field:e=>e.factura,format:e=>`${e}`,sortable:!0},{label:"RNC",name:"RNC",required:!0,align:"lefth",field:e=>e.RNC,format:e=>`${e}`,sortable:!0},{label:"Direccion",name:"direccion",required:!0,align:"lefth",field:e=>e.direccion,format:e=>`${e}`,sortable:!0},{label:"Monto de la Factura",name:"montoinicial",required:!0,align:"center",field:e=>e.cuentaporpagar.montoinicial,format:e=>`${e}`,sortable:!0},{label:"Monto Pendiente a Pagar ",name:"montorestante",required:!0,align:"center",field:e=>e.cuentaporpagar.montorestante,format:e=>`${e}`,sortable:!0},{label:"Fecha",name:"createdAt",required:!0,align:"center",field:e=>e.createdAt,format:e=>`${e}`,sortable:!0}]}},components:{},methods:{async loadCuentasPorPagar(){await $.get("/gastos-empresas/getCuentasporPagar/",{headers:{Authorization:`Bearer ${V.getUserLogged()}`}}).then(e=>{this.rows=e.data}).catch(e=>this.$q.notify({type:"negative",position:"top",message:e.response.data.message}))},onRowClick(e){this.$router.push({path:"/pagogasto/"+e.id,params:{idpago:e.id}})},FormatoFecha(e){return x(String(e)).format("MM/DD/YYYY hh:mm")},exportTable(){const e=[this.columns.map(n=>g(n.label))].concat(this.rows.map(n=>this.columns.map(r=>g(typeof r.field=="function"?r.field(n):n[r.field===void 0?r.name:r.field],r.format,n)).join(","))).join(`\r
`);T("Listado_Cuenta_Por_Cobrar.csv",e,"text/csv")!==!0&&A.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}},mounted(){this.loadCuentasPorPagar()},setup(){return{confirm:c(!1),filter:c("")}}},D={class:"q-pa-md"};function M(e,d,n,r,m,u){return f(),p(Q,{class:"q-pa-md"},{default:t(()=>[C("div",D,[o(h,{flat:"",bordered:"",title:"Cuentas por Pagar",rows:m.rows,columns:m.columns,color:"primary","row-key":"name"},{body:t(a=>[o(b,{props:a,onClick:S=>u.onRowClick(a.row)},{default:t(()=>[o(s,{key:"Nombre",props:a},{default:t(()=>[i(l(a.row.Nombre),1)]),_:2},1032,["props"]),o(s,{key:"NCF",props:a},{default:t(()=>[i(l(a.row.NCF),1)]),_:2},1032,["props"]),o(s,{key:"factura",props:a},{default:t(()=>[i(l(a.row.factura),1)]),_:2},1032,["props"]),o(s,{key:"RNC",props:a},{default:t(()=>[i(l(a.row.RNC),1)]),_:2},1032,["props"]),o(s,{key:"direccion",props:a},{default:t(()=>[i(l(a.row.direccion),1)]),_:2},1032,["props"]),o(s,{key:"montoinicial",props:a},{default:t(()=>[i(l(a.row.cuentaporpagar.montoinicial),1)]),_:2},1032,["props"]),o(s,{key:"montorestante",props:a},{default:t(()=>[i(l(a.row.cuentaporpagar.montorestante),1)]),_:2},1032,["props"]),o(s,{key:"createdAt",props:a},{default:t(()=>[i(l(u.FormatoFecha(a.row.createdAt)),1)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),"top-right":t(()=>[o(y,{borderless:"",dense:"",debounce:"300",modelValue:r.filter,"onUpdate:modelValue":d[0]||(d[0]=a=>r.filter=a),placeholder:"Buscar"},{append:t(()=>[o(_,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","columns"])]),o(v,{position:"top-right",offset:[18,18]},{default:t(()=>[k((f(),p(N,{icon:"add",direction:"down",color:"primary",disable:e.draggingFab},{default:t(()=>[o(P,{onClick:u.exportTable,color:"positive",icon:"download",disable:e.draggingFab},{default:t(()=>[o(F,null,{default:t(()=>[i(" Descargar ")]),_:1})]),_:1},8,["onClick","disable"])]),_:1},8,["disable"])),[[q,e.moveFab,void 0,{prevent:!0,mouse:!0}]])]),_:1})]),_:1})}var ee=w(B,[["render",M]]);export{ee as default};
