import{_ as N,n as D,o as S,c as V,w as a,f as i,a as t,J as u,aw as l,af as P,M as c,N as f,e as n,ah as y,ax as h,Q as B}from"./index.ef228992.js";import{Q as d}from"./QSpace.7f894e1d.js";import{Q as g}from"./QCardActions.bed2bb53.js";import{b as k,Q as v,a as m}from"./QTable.54a77e6e.js";import{Q as F}from"./QPage.2fc420a1.js";import{C as w}from"./ClosePopup.6197016b.js";import{api as q}from"./axios.23aa70c0.js";import{u as G}from"./use-quasar.38626e8f.js";import{a as Q}from"./authenticate.bcdfbf4f.js";import{h as M}from"./moment.9709ab41.js";import"./format.6bd9982d.js";import"./use-key-composition.25c6204a.js";import"./QItemLabel.1cc16253.js";import"./js.cookie.f93afda9.js";G();const I={name:"GastoDetailPage",data(){return{productos:!1,pagoscard:!1,pagos:[],items:[],gasto:{Nombre:"",NCF:"",factura:"",RNC:"",direccion:"",cuentaporpagar:{montoinicial:0,montorestante:0},proyecto:{name:"",cliente:{nombre:""},fecha_inicio:""}},columsitems:[{label:"Cantidad",name:"cantidad",required:!0,align:"center",field:e=>e.cantidad,format:e=>`${e}`,sortable:!0},{label:"Nombre",name:"descripcion",required:!0,align:"center",field:e=>e.descripcion,format:e=>`${e}`,sortable:!0},{label:"ITBIS",name:"importeimpuesto",required:!0,align:"center",field:e=>e.importeimpuesto,format:e=>`${e}`,sortable:!0},{label:"Importe",name:"importe",required:!0,align:"center",field:e=>e.importe,format:e=>`${e}`,sortable:!0},{label:"Subtotal",name:"valortotal",required:!0,align:"center",field:e=>e.valortotal,format:e=>`${e}`,sortable:!0}],columspagos:[{label:"Cuenta",name:"cuenta",required:!0,align:"center",field:e=>e.cuenta,format:e=>`${e}`,sortable:!0},{label:"Banco",name:"banco",required:!0,align:"center",field:e=>e.banco,format:e=>`${e}`,sortable:!0},{label:"Moneda",name:"moneda",required:!0,align:"center",field:e=>e.moneda,format:e=>`${e}`,sortable:!0},{label:"Monto",name:"monto",required:!0,align:"center",field:e=>e.monto,format:e=>`${e}`,sortable:!0},{label:"Fecha",name:"fecha",required:!0,align:"center",field:e=>e.create_At,format:e=>`${e}`,sortable:!0}]}},components:{},methods:{async loadGastos(){await q.get("/gastos-empresas/"+this.$route.params.idgasto,{headers:{Authorization:`Bearer ${Q.getUserLogged()}`}}).then(e=>{this.items=e.data.gastosItems,this.gasto=e.data,this.pagos=e.data.pagos}).catch(e=>this.$q.notify({type:"negative",position:"top",message:e.response.data.message}))},Salir(){this.$router.push("/Dashboard")},async DeleteGasto(){await q.delete("/gastos-empresas/"+this.$route.params.idgasto,{headers:{Authorization:`Bearer ${Q.getUserLogged()}`}}).then(e=>{this.$q.notify({color:"positive",position:"top",message:"Se elimino el gasto"+e.data.Nombre,icon:"done"}),this.$router.push("/gastos")}).catch(e=>this.$q.notify({type:"negative",position:"top",message:e.response.data.message}))},FormatoFecha(e){return M(String(e)).format("MM/DD/YYYY hh:mm")}},mounted(){this.loadGastos()},setup(){return{confirm:D(!1)}}},x={class:"q-pa-md flat bordered"},A={class:"q-pa-md q-gutter-sm"},T=i("span",{class:"q-ml-sm"},"Desea eliminar el Gato?.",-1);function U(e,s,$,b,r,_){return S(),V(F,{class:"q-pa-md"},{default:a(()=>[i("div",x,[t(f,{class:"my-card"},{default:a(()=>[t(u,null,{default:a(()=>{var o,p,C;return[i("p",null," Nombre Proyecto: "+l((o=r.gasto.proyecto)==null?void 0:o.name),1),i("p",null," Cliente: "+l((p=r.gasto.proyecto)==null?void 0:p.cliente.nombre),1),i("p",null," Fecha Inicio:"+l((C=r.gasto.proyecto)==null?void 0:C.fecha_inicio),1)]}),_:1}),t(P),t(u,{class:"row"},{default:a(()=>[i("p",null," Nombre Entidad: "+l(r.gasto.Nombre),1),t(d),i("p",null," Direcci\xF3n: "+l(r.gasto.direccion),1)]),_:1}),t(u,{class:"row"},{default:a(()=>[i("p",null," Monto Inicial: "+l(r.gasto.cuentaporpagar.montoinicial),1),t(d),i("p",null," Monto Restante: "+l(r.gasto.cuentaporpagar.montorestante),1)]),_:1}),t(u,{class:"row"},{default:a(()=>[i("p",null," NCF: "+l(r.gasto.NCF),1),t(d),i("p",null," Factura: "+l(r.gasto.factura),1),t(d),i("p",null," RNC: "+l(r.gasto.RNC),1)]),_:1}),t(u,{class:"row"},{default:a(()=>[t(c,{label:"Productos",color:"primary",icon:"search",onClick:s[0]||(s[0]=o=>r.productos=!0)}),t(d),t(c,{label:"Pagos",color:"primary",icon:"search",onClick:s[1]||(s[1]=o=>r.pagoscard=!0)})]),_:1}),t(g,null,{default:a(()=>[t(c,{label:"Eliminar",icon:"delete",type:"submit",color:"negative",flat:"",class:"q-ml-sm",onClick:s[2]||(s[2]=o=>b.confirm=!0)}),t(c,{label:"Cerrar",icon:"cancel",type:"cancel",color:"primary",flat:"",class:"q-ml-sm",onClick:s[3]||(s[3]=o=>_.Salir())})]),_:1})]),_:1})]),t(h,{modelValue:r.productos,"onUpdate:modelValue":s[4]||(s[4]=o=>r.productos=o),"full-width":""},{default:a(()=>[t(f,null,{default:a(()=>[t(u,null,{default:a(()=>[t(k,{flat:"",bordered:"",title:"Productos",rows:r.items,columns:r.columsitems,color:"primary","row-key":"name",filter:e.filter},{body:a(o=>[t(v,{props:o,onClick:p=>e.selectProducto(o.row)},{default:a(()=>[t(m,{key:"cantidad",props:o},{default:a(()=>[n(l(o.row.cantidad),1)]),_:2},1032,["props"]),t(m,{key:"descripcion",props:o},{default:a(()=>[n(l(o.row.descripcion),1)]),_:2},1032,["props"]),t(m,{key:"importeimpuesto",props:o},{default:a(()=>[n(l(o.row.importeimpuesto),1)]),_:2},1032,["props"]),t(m,{key:"importe",props:o},{default:a(()=>[n(l(o.row.importe),1)]),_:2},1032,["props"]),t(m,{key:"valortotal",props:o},{default:a(()=>[n(l(o.row.valortotal),1)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["rows","columns","filter"])]),_:1}),t(g,{align:"right",class:"bg-white text-teal"},{default:a(()=>[y(t(c,{flat:"",label:"Salir"},null,512),[[w]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(h,{modelValue:r.pagoscard,"onUpdate:modelValue":s[5]||(s[5]=o=>r.pagoscard=o),"full-width":""},{default:a(()=>[t(f,null,{default:a(()=>[t(u,null,{default:a(()=>[t(k,{flat:"",bordered:"",title:"Pagos",rows:r.pagos,columns:r.columspagos,color:"primary","row-key":"name",filter:e.filter},{body:a(o=>[t(v,{props:o,onClick:p=>e.selectProducto(o.row)},{default:a(()=>[t(m,{key:"cuenta",props:o},{default:a(()=>[n(l(o.row.cuenta),1)]),_:2},1032,["props"]),t(m,{key:"descripcion",props:o},{default:a(()=>[n(l(o.row.descripcion),1)]),_:2},1032,["props"]),t(m,{key:"importeimpuesto",props:o},{default:a(()=>[n(l(o.row.importeimpuesto),1)]),_:2},1032,["props"]),t(m,{key:"importe",props:o},{default:a(()=>[n(l(o.row.importe),1)]),_:2},1032,["props"]),t(m,{key:"valortotal",props:o},{default:a(()=>[n(l(o.row.valortotal),1)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["rows","columns","filter"])]),_:1}),t(g,{align:"right",class:"bg-white text-teal"},{default:a(()=>[y(t(c,{flat:"",label:"Salir"},null,512),[[w]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),i("template",null,[i("div",A,[t(h,{modelValue:b.confirm,"onUpdate:modelValue":s[7]||(s[7]=o=>b.confirm=o),persistent:""},{default:a(()=>[t(f,null,{default:a(()=>[t(u,{class:"row items-center"},{default:a(()=>[t(B,{icon:"priority_high",color:"primary","text-color":"white"}),T]),_:1}),t(g,{align:"right"},{default:a(()=>[y(t(c,{label:"Cancelar",icon:"cancel",type:"cancel",color:"primary",flat:"",class:"q-ml-sm"},null,512),[[w]]),t(c,{label:"Eliminar",icon:"delete",type:"submit",color:"negative",flat:"",class:"q-ml-sm",onClick:s[6]||(s[6]=o=>_.DeleteGasto())})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),_:1})}var te=N(I,[["render",U]]);export{te as default};
