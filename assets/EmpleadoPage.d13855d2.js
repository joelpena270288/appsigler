import{Q as N,a as c,b as D,g as q}from"./QTable.54a77e6e.js";import{_ as A,n as V,o as w,c as k,w as s,f as m,a as o,e as u,aw as g,N as v,J as n,af as y,M as f,ax as E,ah as Q,Q as T}from"./index.ef228992.js";import{Q as i}from"./QInput.a2bee355.js";import{Q as C}from"./QCardActions.bed2bb53.js";import{Q as S,a as U,b as x,c as _}from"./QPageSticky.a179ccb3.js";import{Q as B}from"./QPage.2fc420a1.js";import{T as P}from"./TouchPan.9047fff0.js";import{C as L}from"./ClosePopup.6197016b.js";import{api as h}from"./axios.23aa70c0.js";import{e as j}from"./export-file.dc78ba05.js";import{u as O}from"./use-quasar.38626e8f.js";import{a as b}from"./authenticate.bcdfbf4f.js";import"./format.6bd9982d.js";import"./use-key-composition.25c6204a.js";import"./QItemLabel.1cc16253.js";import"./js.cookie.f93afda9.js";function z(l,a,r){let d=a!==void 0?a(l,r):l;return d=d==null?"":String(d),d=d.split('"').join('""'),`"${d}"`}const F=O(),R={name:"EmpleadoPage",data(){return{newEmpleado:!1,editEmpleado:!1,rows:[],columns:[{label:"Nombre",name:"name",required:!0,align:"center",field:l=>l.name,format:l=>`${l}`,sortable:!0},{label:"Apellidos",name:"lastname",required:!0,align:"center",field:l=>l.lastname,format:l=>`${l}`,sortable:!0},{label:"Direcci\xF3n",name:"address",required:!0,align:"center",field:l=>l.address,format:l=>`${l}`,sortable:!0},{label:"N\xFAmero de Tel\xE9fono",name:"phone",required:!0,align:"center",field:l=>l.phone,format:l=>`${l}`,sortable:!0},{label:"C\xE9dula",name:"cedule",required:!0,align:"center",field:l=>l.cedule,format:l=>`${l}`,sortable:!0},{label:"Pasaporte",name:"passport",required:!0,align:"center",field:l=>l.passport,format:l=>`${l}`,sortable:!0}],empleados:[],empleado:{name:"",lastname:"",address:"",phone:"",cedule:"",passport:"",cargos:[]},ideselected:0,cargos:[]}},components:{},methods:{loadEmpleado(){h.get("/empleado/",{headers:{Authorization:`Bearer ${b.getUserLogged()}`}}).then(l=>{this.rows=l.data}).catch(l=>this.$q.notify({type:"negative",position:"top",message:l.response.data.message}))},loadCargo(){h.get("/cargo/",{headers:{Authorization:`Bearer ${b.getUserLogged()}`}}).then(l=>{this.cargos=l.data}).catch(l=>this.$q.notify({type:"negative",position:"top",message:l.response.data.message}))},OpenNewEmpleado(){this.empleado={},this.newEmpleado=!0},ClosedNewEmpleado(){this.empleado={},this.newEmpleado=!1},async AddEmpleado(){this.empleado.name!==""&this.empleado.lastname!==""&this.empleado.address!==""?(await h.post("/empleado/",this.empleado,{headers:{Authorization:`Bearer ${b.getUserLogged()}`}}).then(l=>{this.$q.notify({color:"positive",position:"top",message:"Se inserto el empleado "+l.data.name,icon:"done"})}).catch(l=>this.$q.notify({type:"negative",position:"top",message:l.response.data.message})),this.newEmpleado=!1,this.loadEmpleado()):this.$q.notify({color:"negative",position:"top",message:"Llene los capos requeridos",icon:"report_problem"})},OpenEdit(){this.editEmpleado=!0},async EditEmpleado(){this.empleado.name!==""&this.empleado.lastname!==""&this.empleado.address!==""?(await h.patch("/empleado/"+this.idselected,this.empleado,{headers:{Authorization:`Bearer ${b.getUserLogged()}`}}).then(l=>{this.$q.notify({color:"positive",position:"top",message:"Se edit\xF3 el empleado "+l.data.name,icon:"done"})}).catch(l=>this.$q.notify({type:"negative",position:"top",message:l.response.data.message})),this.editEmpleado=!1,this.loadEmpleado()):this.$q.notify({color:"negative",position:"top",message:"Llene los capos requeridos",icon:"report_problem"})},ClosedEditEmpleado(){this.empleado={},this.editEmpleado=!1},async DeleteEmpleado(){await h.delete("/empleado/"+this.idselected,{headers:{Authorization:`Bearer ${b.getUserLogged()}`}}).then(l=>{this.$q.notify({color:"positive",position:"top",message:"Se Desahabilito el empleado del sistema "+l.data.name,icon:"done"})}).catch(l=>this.$q.notify({type:"negative",position:"top",message:l.response.data.message})),this.confirm=!1,this.editEmpleado=!1,this.loadEmpleado()},onRowClick(l){this.idselected=l.id,this.empleado.name=l.name,this.empleado.lastname=l.lastname,this.empleado.address=l.address,this.empleado.phone=l.phone,this.empleado.cedule=l.cedule,this.empleado.passport=l.passport,this.empleado.cargos=[];for(let a=0;a<l.cargos.length;a++)this.empleado.cargos.push(l.cargos[a].name);this.editEmpleado=!0},exportTable(){const l=[this.columns.map(r=>z(r.label))].concat(this.rows.map(r=>this.columns.map(d=>z(typeof d.field=="function"?d.field(r):r[d.field===void 0?d.name:d.field],d.format,r)).join(","))).join(`\r
`);j("Listado_Empleados.csv",l,"text/csv")!==!0&&F.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}},mounted(){this.loadEmpleado(),this.loadCargo()},setup(){return{selected:V([]),selectedCargos:V(null),confirm:V(!1)}}},I={class:"q-pa-md"},J={class:"q-pa-md q-gutter-sm"},M=m("div",{class:"text-h6"},"Nuevo Empleado",-1),G={class:"q-pa-md q-gutter-sm"},H=m("div",{class:"text-h6"},"Editar Empleado",-1),K={class:"q-pt-none",style:{"max-width":"700px"}},W={class:"q-pa-md q-gutter-sm"},X=m("span",{class:"q-ml-sm"},"Desea desahabilitar el empleado?.",-1);function Y(l,a,r,d,t,p){return w(),k(B,{class:"q-pa-md"},{default:s(()=>[m("div",I,[o(D,{flat:"",bordered:"",title:"Empleados",rows:t.rows,columns:t.columns,color:"primary","row-key":"name"},{body:s(e=>[o(N,{props:e,onClick:Z=>p.onRowClick(e.row)},{default:s(()=>[o(c,{key:"name",props:e},{default:s(()=>[u(g(e.row.name),1)]),_:2},1032,["props"]),o(c,{key:"lastname",props:e},{default:s(()=>[u(g(e.row.lastname),1)]),_:2},1032,["props"]),o(c,{key:"address",props:e},{default:s(()=>[u(g(e.row.address),1)]),_:2},1032,["props"]),o(c,{key:"phone",props:e},{default:s(()=>[u(g(e.row.phone),1)]),_:2},1032,["props"]),o(c,{key:"cedule",props:e},{default:s(()=>[u(g(e.row.cedule),1)]),_:2},1032,["props"]),o(c,{key:"passport",props:e},{default:s(()=>[u(g(e.row.passport),1)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["rows","columns"])]),m("template",null,[m("div",J,[o(E,{modelValue:t.newEmpleado,"onUpdate:modelValue":a[9]||(a[9]=e=>t.newEmpleado=e),persistent:""},{default:s(()=>[o(v,{class:"my-card",flat:"",bordered:""},{default:s(()=>[o(n,{class:"horizontal"},{default:s(()=>[M]),_:1}),o(y),o(n,{class:"horizontal"},{default:s(()=>[o(i,{filled:"",modelValue:t.empleado.name,"onUpdate:modelValue":a[0]||(a[0]=e=>t.empleado.name=e),label:"Nombre *","lazy-rules":"",rules:[e=>e&&e.length>0||"Debe introducir un nombre "]},null,8,["modelValue","rules"])]),_:1}),o(n,{class:"horizontal"},{default:s(()=>[o(i,{filled:"",modelValue:t.empleado.lastname,"onUpdate:modelValue":a[1]||(a[1]=e=>t.empleado.lastname=e),label:"Apellidos ","lazy-rules":"",rules:[e=>e&&e.length>0||"Debe introducir los apellidos "]},null,8,["modelValue","rules"])]),_:1}),o(n,{class:"horizontal"},{default:s(()=>[o(i,{filled:"",modelValue:t.empleado.cedule,"onUpdate:modelValue":a[2]||(a[2]=e=>t.empleado.cedule=e),label:"C\xE9dula "},null,8,["modelValue"])]),_:1}),o(n,{class:"horizontal"},{default:s(()=>[o(i,{filled:"",modelValue:t.empleado.passport,"onUpdate:modelValue":a[3]||(a[3]=e=>t.empleado.passport=e),label:"Pasaporte "},null,8,["modelValue"])]),_:1}),o(n,{class:"horizontal"},{default:s(()=>[o(i,{filled:"",modelValue:t.empleado.phone,"onUpdate:modelValue":a[4]||(a[4]=e=>t.empleado.phone=e),label:"Numero de Tel\xE9fono",mask:"(###) ### - ####"},null,8,["modelValue"])]),_:1}),o(n,{class:"horizontal"},{default:s(()=>[o(i,{modelValue:t.empleado.address,"onUpdate:modelValue":a[5]||(a[5]=e=>t.empleado.address=e),filled:"",type:"textarea",label:"Direcci\xF3n"},null,8,["modelValue"])]),_:1}),o(n,{class:"horizontal"},{default:s(()=>[o(q,{filled:"",multiple:"",label:"Selecciona los Cargos",modelValue:t.empleado.cargos,"onUpdate:modelValue":a[6]||(a[6]=e=>t.empleado.cargos=e),options:t.cargos,"option-value":e=>Object(e)===e&&"name"in e?e.name:null,"option-label":e=>Object(e)===e&&"name"in e?e.name:"- Cargos -","emit-value":"","map-options":"",style:{"min-width":"250px","max-width":"300px"}},null,8,["modelValue","options","option-value","option-label"])]),_:1}),o(y),o(C,null,{default:s(()=>[o(f,{label:"Enviar",icon:"send",type:"submit",color:"primary",flat:"",class:"q-ml-sm",onClick:a[7]||(a[7]=e=>p.AddEmpleado())}),o(f,{label:"Cancelar",icon:"cancel",type:"reset",color:"primary",flat:"",class:"q-ml-sm",onClick:a[8]||(a[8]=e=>p.ClosedNewEmpleado())})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),m("template",null,[m("div",G,[o(E,{modelValue:t.editEmpleado,"onUpdate:modelValue":a[20]||(a[20]=e=>t.editEmpleado=e),persistent:""},{default:s(()=>[o(v,{class:"my-card",flat:"",bordered:""},{default:s(()=>[o(n,null,{default:s(()=>[H]),_:1}),o(y),o(n,null,{default:s(()=>[m("div",K,[o(i,{filled:"",modelValue:t.empleado.name,"onUpdate:modelValue":a[10]||(a[10]=e=>t.empleado.name=e),label:"Nombre *",hint:"nombre del empleado","lazy-rules":"",rules:[e=>e&&e.length>0||"Debe introducir un nombre "]},null,8,["modelValue","rules"]),o(i,{filled:"",modelValue:t.empleado.lastname,"onUpdate:modelValue":a[11]||(a[11]=e=>t.empleado.lastname=e),label:"Apellidos ",hint:"Aplellidos del empleado","lazy-rules":"",rules:[e=>e&&e.length>0||"Debe introducir los apellidos "]},null,8,["modelValue","rules"]),o(i,{filled:"",modelValue:t.empleado.cedule,"onUpdate:modelValue":a[12]||(a[12]=e=>t.empleado.cedule=e),label:"C\xE9dula ",hint:"C\xE9dula del empleado"},null,8,["modelValue"]),o(i,{filled:"",modelValue:t.empleado.passport,"onUpdate:modelValue":a[13]||(a[13]=e=>t.empleado.passport=e),label:"Pasaporte ",hint:"Pasaporte del empleado"},null,8,["modelValue"]),o(i,{filled:"",modelValue:t.empleado.phone,"onUpdate:modelValue":a[14]||(a[14]=e=>t.empleado.phone=e),label:"Numero de Tel\xE9fono",mask:"(###) ### - ####",hint:"N\xFAmero de Tel\xE9fono"},null,8,["modelValue"]),o(i,{modelValue:t.empleado.address,"onUpdate:modelValue":a[15]||(a[15]=e=>t.empleado.address=e),filled:"",type:"textarea",label:"Direcci\xF3n",hint:"Direcci\xF3n del empleado"},null,8,["modelValue"]),o(q,{filled:"",multiple:"",label:"Selecciona los Cargos",modelValue:t.empleado.cargos,"onUpdate:modelValue":a[16]||(a[16]=e=>t.empleado.cargos=e),options:t.cargos,"option-value":e=>Object(e)===e&&"name"in e?e.name:null,"option-label":e=>Object(e)===e&&"name"in e?e.name:"- Cargos -","emit-value":"","map-options":"",style:{"min-width":"250px","max-width":"300px"}},null,8,["modelValue","options","option-value","option-label"])])]),_:1}),o(y),o(C,null,{default:s(()=>[o(f,{label:"Enviar",icon:"send",type:"submit",color:"primary",flat:"",class:"q-ml-sm",onClick:a[17]||(a[17]=e=>p.EditEmpleado())}),o(f,{label:"Eliminar",icon:"delete",type:"submit",color:"negative",flat:"",class:"q-ml-sm",onClick:a[18]||(a[18]=e=>d.confirm=!0)}),o(f,{label:"Cerrar",icon:"cancel",type:"cancel",color:"primary",flat:"",class:"q-ml-sm",onClick:a[19]||(a[19]=e=>p.ClosedEditEmpleado())})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),o(_,{position:"top-right",offset:[18,18]},{default:s(()=>[Q((w(),k(S,{icon:"add",direction:"down",color:"primary",disable:l.draggingFab},{default:s(()=>[o(U,{onClick:a[21]||(a[21]=e=>p.exportTable()),color:"positive",icon:"download",disable:l.draggingFab},{default:s(()=>[o(x,null,{default:s(()=>[u(" Descargar ")]),_:1})]),_:1},8,["disable"]),o(U,{onClick:a[22]||(a[22]=e=>p.OpenNewEmpleado()),color:"positive",icon:"person_add",disable:l.draggingFab},{default:s(()=>[o(x,null,{default:s(()=>[u(" Nuevo ")]),_:1})]),_:1},8,["disable"])]),_:1},8,["disable"])),[[P,l.moveFab,void 0,{prevent:!0,mouse:!0}]])]),_:1}),m("template",null,[m("div",W,[o(E,{modelValue:d.confirm,"onUpdate:modelValue":a[24]||(a[24]=e=>d.confirm=e),persistent:""},{default:s(()=>[o(v,null,{default:s(()=>[o(n,{class:"row items-center"},{default:s(()=>[o(T,{icon:"priority_high",color:"primary","text-color":"white"}),X]),_:1}),o(C,{align:"right"},{default:s(()=>[Q(o(f,{label:"Cancelar",icon:"cancel",type:"cancel",color:"primary",flat:"",class:"q-ml-sm"},null,512),[[L]]),o(f,{label:"Eliminar",icon:"delete",type:"submit",color:"negative",flat:"",class:"q-ml-sm",onClick:a[23]||(a[23]=e=>p.DeleteEmpleado())})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),_:1})}var ge=A(R,[["render",Y]]);export{ge as default};
