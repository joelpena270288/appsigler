import{Q as x,a as h,b as z,g as w}from"./QTable.54a77e6e.js";import{_ as B,n as E,o as V,c as Q,w as o,f as i,a as t,e as c,aw as C,N as v,J as r,af as b,M as m,ax as y,ah as k,Q as A}from"./index.ef228992.js";import{Q as g}from"./QInput.a2bee355.js";import{Q as q}from"./QCardActions.bed2bb53.js";import{Q as D,a as _,b as N,c as S}from"./QPageSticky.a179ccb3.js";import{Q as T}from"./QPage.2fc420a1.js";import{T as L}from"./TouchPan.9047fff0.js";import{C as j}from"./ClosePopup.6197016b.js";import{api as p}from"./axios.23aa70c0.js";import{e as M}from"./export-file.dc78ba05.js";import{u as O}from"./use-quasar.38626e8f.js";import{a as f}from"./authenticate.bcdfbf4f.js";import"./format.6bd9982d.js";import"./use-key-composition.25c6204a.js";import"./QItemLabel.1cc16253.js";import"./js.cookie.f93afda9.js";function U(a,n,u){let s=n!==void 0?n(a,u):a;return s=s==null?"":String(s),s=s.split('"').join('""'),`"${s}"`}const F=O(),P={name:"ImpuestoPage",data(){return{newCuenta:!1,editCuenta:!1,rows:[],columns:[{label:"Moneda",name:"moneda.valor",required:!0,align:"center",field:a=>a.moneda.valor,format:a=>`${a}`,sortable:!0},{label:"Numero cuenta",name:"numerocuenta",required:!1,align:"center",field:a=>a.numerocuenta,format:a=>`${a}`,sortable:!0},{label:"Banco",name:"banco",required:!0,align:"center",field:a=>a.banco,format:a=>`${a}`,sortable:!0}],cuentas:[],monedas:[],cuenta:{moneda:{id:"",valor:""},banco:"",numerocuenta:0},ideselected:0}},components:{},methods:{async loadCuentas(){await p.get("/cuentas-empresa/",{headers:{Authorization:`Bearer ${f.getUserLogged()}`}}).then(a=>{this.cuentas=a.data}).catch(a=>this.$q.notify({type:"negative",position:"top",message:a.response.data.message}))},async loadMonedas(){await p.get("/moneda/",{headers:{Authorization:`Bearer ${f.getUserLogged()}`}}).then(a=>{this.monedas=a.data}).catch(a=>this.$q.notify({type:"negative",position:"top",message:a.response.data.message}))},OpenNewCuenta(){this.cuenta.banco="",this.cuenta.numerocuenta="",this.cuenta.moneda={id:"",valor:""},this.newCuenta=!0},ClosedNewCuenta(){this.cuenta.banco="",this.cuenta.numerocuenta="",this.cuenta.moneda.id="",this.cuenta.moneda.valor="",this.newCuenta=!1},async AddCuenta(){this.cuenta.banco!==""&this.cuenta.numerocuenta!==""&this.cuenta.moneda.id!==""?(await p.post("/cuentas-empresa/",{idmoneda:this.cuenta.moneda.id,numerocuenta:this.cuenta.numerocuenta,banco:this.cuenta.banco},{headers:{Authorization:`Bearer ${f.getUserLogged()}`}}).then(a=>{this.$q.notify({color:"positive",position:"top",message:"Se inserto el La cuenta"+a.data.numerocuenta,icon:"done"})}).catch(a=>this.$q.notify({type:"negative",position:"top",message:a.response.data.message})),this.newCuenta=!1,this.loadCuentas()):this.$q.notify({color:"negative",position:"top",message:"Llene los capos requeridos",icon:"report_problem"})},OpenEdit(){this.editCuenta=!0},async EditCuenta(){this.cuenta.banco!==""&this.cuenta.numerocuenta!==""&this.cuenta.moneda.id!==""?(await p.patch("/cuentas-empresa/"+this.idselected,{idmoneda:this.cuenta.moneda.id,numerocuenta:this.cuenta.numerocuenta,banco:this.cuenta.banco},{headers:{Authorization:`Bearer ${f.getUserLogged()}`}}).then(a=>{this.$q.notify({color:"positive",position:"top",message:"Se Modifico la Cuenta "+a.data.numerocuenta,icon:"done"})}).catch(a=>this.$q.notify({type:"negative",position:"top",message:a.response.data.message})),this.editCuenta=!1,this.loadCuentas()):this.$q.notify({color:"negative",position:"top",message:"Llene los capos requeridos",icon:"report_problem"})},ClosedEditCuenta(){this.editCuenta=!1},async DeleteCuenta(){await p.delete("/cuentas-empresa/"+this.idselected,{headers:{Authorization:`Bearer ${f.getUserLogged()}`}}).then(a=>{this.$q.notify({color:"positive",position:"top",message:"Se Elimino la cuenta "+a.data.numerocuenta,icon:"done"})}).catch(a=>this.$q.notify({type:"negative",position:"top",message:a.response.data.message})),this.confirm=!1,this.editCuenta=!1,this.loadCuentas()},onRowClick(a){this.cuenta.moneda.valor=a.moneda.valor,this.cuenta.moneda.id=a.moneda.id,this.cuenta.banco=a.banco,this.cuenta.numerocuenta=a.numerocuenta,this.idselected=a.id,this.editCuenta=!0},exportTable(){const a=[this.columns.map(u=>U(u.label))].concat(this.rows.map(u=>this.columns.map(s=>U(typeof s.field=="function"?s.field(u):u[s.field===void 0?s.name:s.field],s.format,u)).join(","))).join(`\r
`);M("table-export.csv",a,"text/csv")!==!0&&F.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}},mounted(){this.loadCuentas(),this.loadMonedas()},setup(){return{confirm:E(!1)}}},I={class:"q-pa-md"},R={class:"q-pa-md q-gutter-sm"},$=i("div",{class:"text-h6"},"Nueva Cuenta",-1),J={class:"q-pa-md q-gutter-sm"},G=i("div",{class:"text-h6"},"Nueva Cuenta",-1),H={class:"q-pa-md q-gutter-sm"},K=i("span",{class:"q-ml-sm"},"Desea desahabilitar la Cuenta?.",-1);function W(a,n,u,s,l,d){return V(),Q(T,{class:"q-pa-md"},{default:o(()=>[i("div",I,[t(z,{flat:"",bordered:"",title:"Cuentas",rows:l.cuentas,columns:l.columns,color:"primary","row-key":"name"},{body:o(e=>[t(x,{props:e,onClick:X=>d.onRowClick(e.row)},{default:o(()=>[t(h,{key:"moneda.valor",props:e},{default:o(()=>[c(C(e.row.moneda.valor),1)]),_:2},1032,["props"]),t(h,{key:"numerocuenta",props:e},{default:o(()=>[c(C(e.row.numerocuenta),1)]),_:2},1032,["props"]),t(h,{key:"banco",props:e},{default:o(()=>[c(C(e.row.banco),1)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["rows","columns"])]),i("template",null,[i("div",R,[t(y,{modelValue:l.newCuenta,"onUpdate:modelValue":n[5]||(n[5]=e=>l.newCuenta=e),persistent:""},{default:o(()=>[t(v,{class:"my-card",flat:"",bordered:""},{default:o(()=>[t(r,null,{default:o(()=>[$]),_:1}),t(b),t(r,{class:"horizontal"},{default:o(()=>[t(w,{filled:"",modelValue:l.cuenta.moneda.id,"onUpdate:modelValue":n[0]||(n[0]=e=>l.cuenta.moneda.id=e),options:l.monedas,"option-value":e=>Object(e)===e&&"id"in e?e.id:null,"option-label":e=>Object(e)===e&&"valor"in e?e.valor:"- Moneda -","emit-value":"","map-options":""},null,8,["modelValue","options","option-value","option-label"])]),_:1}),t(r,{class:"horizontal"},{default:o(()=>[t(g,{filled:"",modelValue:l.cuenta.numerocuenta,"onUpdate:modelValue":n[1]||(n[1]=e=>l.cuenta.numerocuenta=e),label:"Numero de Cuenta *","lazy-rules":"",rules:[e=>e&&e.length>0||"Debe introducir un numero de serie "]},null,8,["modelValue","rules"])]),_:1}),t(r,{class:"horizontal"},{default:o(()=>[t(g,{modelValue:l.cuenta.banco,"onUpdate:modelValue":n[2]||(n[2]=e=>l.cuenta.banco=e),filled:"",type:"textarea",label:"Banco"},null,8,["modelValue"])]),_:1}),t(b),t(q,null,{default:o(()=>[t(m,{label:"Enviar",icon:"send",type:"submit",color:"primary",flat:"",class:"q-ml-sm",onClick:n[3]||(n[3]=e=>d.AddCuenta())}),t(m,{label:"Cancelar",icon:"cancel",type:"reset",color:"primary",flat:"",class:"q-ml-sm",onClick:n[4]||(n[4]=e=>d.ClosedNewCuenta())})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),i("template",null,[i("div",J,[t(y,{modelValue:l.editCuenta,"onUpdate:modelValue":n[12]||(n[12]=e=>l.editCuenta=e),persistent:""},{default:o(()=>[t(v,{class:"my-card",flat:"",bordered:""},{default:o(()=>[t(r,null,{default:o(()=>[G]),_:1}),t(b),t(r,{class:"horizontal"},{default:o(()=>[t(w,{filled:"",modelValue:l.cuenta.moneda.id,"onUpdate:modelValue":n[6]||(n[6]=e=>l.cuenta.moneda.id=e),options:l.monedas,"option-value":e=>Object(e)===e&&"id"in e?e.id:null,"option-label":e=>Object(e)===e&&"valor"in e?e.valor:"- Moneda -","emit-value":"","map-options":""},null,8,["modelValue","options","option-value","option-label"])]),_:1}),t(r,{class:"horizontal"},{default:o(()=>[t(g,{filled:"",modelValue:l.cuenta.numerocuenta,"onUpdate:modelValue":n[7]||(n[7]=e=>l.cuenta.numerocuenta=e),label:"Numero de Cuenta *","lazy-rules":"",rules:[e=>e&&e.length>0||"Debe introducir un numero de serie "]},null,8,["modelValue","rules"])]),_:1}),t(r,{class:"horizontal"},{default:o(()=>[t(g,{modelValue:l.cuenta.banco,"onUpdate:modelValue":n[8]||(n[8]=e=>l.cuenta.banco=e),filled:"",type:"textarea",label:"Banco"},null,8,["modelValue"])]),_:1}),t(b),t(q,null,{default:o(()=>[t(m,{label:"Enviar",icon:"send",type:"submit",color:"primary",flat:"",class:"q-ml-sm",onClick:n[9]||(n[9]=e=>d.EditCuenta())}),t(m,{label:"Eliminar",icon:"delete",type:"submit",color:"negative",flat:"",class:"q-ml-sm",onClick:n[10]||(n[10]=e=>s.confirm=!0)}),t(m,{label:"Cerrar",icon:"cancel",type:"cancel",color:"primary",flat:"",class:"q-ml-sm",onClick:n[11]||(n[11]=e=>d.ClosedEditCuenta())})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),t(S,{position:"top-right",offset:[18,18]},{default:o(()=>[k((V(),Q(D,{icon:"add",direction:"down",color:"primary",disable:a.draggingFab},{default:o(()=>[t(_,{onClick:n[13]||(n[13]=e=>d.exportTable()),color:"positive",icon:"download",disable:a.draggingFab},{default:o(()=>[t(N,null,{default:o(()=>[c(" Descargar ")]),_:1})]),_:1},8,["disable"]),t(_,{onClick:n[14]||(n[14]=e=>d.OpenNewCuenta()),color:"positive",icon:"add_box",disable:a.draggingFab},{default:o(()=>[t(N,null,{default:o(()=>[c(" Nuevo ")]),_:1})]),_:1},8,["disable"])]),_:1},8,["disable"])),[[L,a.moveFab,void 0,{prevent:!0,mouse:!0}]])]),_:1}),i("template",null,[i("div",H,[t(y,{modelValue:s.confirm,"onUpdate:modelValue":n[16]||(n[16]=e=>s.confirm=e),persistent:""},{default:o(()=>[t(v,null,{default:o(()=>[t(r,{class:"row items-center"},{default:o(()=>[t(A,{icon:"priority_high",color:"primary","text-color":"white"}),K]),_:1}),t(q,{align:"right"},{default:o(()=>[k(t(m,{label:"Cancelar",icon:"cancel",type:"cancel",color:"primary",flat:"",class:"q-ml-sm"},null,512),[[j]]),t(m,{label:"Eliminar",icon:"delete",type:"submit",color:"negative",flat:"",class:"q-ml-sm",onClick:n[15]||(n[15]=e=>d.DeleteCuenta())})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),_:1})}var fe=B(P,[["render",W]]);export{fe as default};
