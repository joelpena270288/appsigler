import{Q as x,a as v,b as U}from"./QTable.54a77e6e.js";import{_ as z,n as D,o as w,c as q,w as l,f as r,a as e,e as c,aw as b,N as y,J as u,af as f,M as p,ax as I,ah as C,Q as E}from"./index.ef228992.js";import{Q as d}from"./QInput.a2bee355.js";import{Q as V}from"./QCardActions.bed2bb53.js";import{Q as N,a as k,b as Q,c as A}from"./QPageSticky.a179ccb3.js";import{Q as B}from"./QPage.2fc420a1.js";import{T}from"./TouchPan.9047fff0.js";import{C as S}from"./ClosePopup.6197016b.js";import{api as g}from"./axios.23aa70c0.js";import{e as F}from"./export-file.dc78ba05.js";import{u as L}from"./use-quasar.38626e8f.js";import{a as h}from"./authenticate.bcdfbf4f.js";import"./format.6bd9982d.js";import"./use-key-composition.25c6204a.js";import"./QItemLabel.1cc16253.js";import"./js.cookie.f93afda9.js";function _(t,s,n){let i=s!==void 0?s(t,n):t;return i=i==null?"":String(i),i=i.split('"').join('""'),`"${i}"`}const P=L(),j={name:"ImpuestoPage",data(){return{newImpuesto:!1,editImpuesto:!1,rows:[],columns:[{label:"Impuestos",name:"name",required:!0,align:"center",field:t=>t.name,format:t=>`${t}`,sortable:!0},{label:"Descripcion",name:"descripcion",required:!1,align:"center",field:t=>t.descripcion,format:t=>`${t}`,sortable:!0},{label:"Valor",name:"valor",required:!0,align:"center",field:t=>t.valor,format:t=>`${t}`,sortable:!0}],impuestos:[],impuesto:{name:"",descripcion:"",valor:0},ideselected:0}},components:{},methods:{loadImpuesto(){g.get("/impuestos/",{headers:{Authorization:`Bearer ${h.getUserLogged()}`}}).then(t=>{this.rows=t.data}).catch(t=>this.$q.notify({type:"negative",position:"top",message:t.response.data.message}))},OpenNewImpuesto(){this.impuesto.name="",this.impuesto.descripcion="",this.impuesto.valor=0,this.newImpuesto=!0},ClosedNewImpuesto(){this.impuesto.name="",this.impuesto.descripcion="",this.impuesto.valor=0,this.newImpuesto=!1},async AddImpuesto(){this.impuesto.name!==""&this.impuesto.valor>0?(await g.post("/impuestos/",this.impuesto,{headers:{Authorization:`Bearer ${h.getUserLogged()}`}}).then(t=>{this.$q.notify({color:"positive",position:"top",message:"Se inserto el impuesto "+t.data.name,icon:"done"})}).catch(t=>this.$q.notify({type:"negative",position:"top",message:t.response.data.message})),this.newImpuesto=!1,this.loadImpuesto()):this.$q.notify({color:"negative",position:"top",message:"Llene los capos requeridos",icon:"report_problem"})},OpenEdit(){this.editImpuesto=!0},async EditImpuesto(){this.impuesto.name!==""&this.impuesto.valor>0?(await g.patch("/impuestos/"+this.idselected,this.impuesto,{headers:{Authorization:`Bearer ${h.getUserLogged()}`}}).then(t=>{this.$q.notify({color:"positive",position:"top",message:"Se Modifico el Impuesto "+t.data.name,icon:"done"})}).catch(t=>this.$q.notify({type:"negative",position:"top",message:t.response.data.message})),this.editImpuesto=!1,this.loadImpuesto()):this.$q.notify({color:"negative",position:"top",message:"Llene los capos requeridos",icon:"report_problem"})},ClosedEditImpuesto(){this.impuesto={},this.editImpuesto=!1},async DeleteImpuesto(){await g.delete("/impuestos/"+this.idselected,{headers:{Authorization:`Bearer ${h.getUserLogged()}`}}).then(t=>{this.$q.notify({color:"positive",position:"top",message:"Se Elimino el Impuesto "+t.data.name,icon:"done"})}).catch(t=>this.$q.notify({type:"negative",position:"top",message:t.response.data.message})),this.confirm=!1,this.editImpuesto=!1,this.loadImpuesto()},onRowClick(t){this.impuesto.name=t.name,this.impuesto.descripcion=t.descripcion,this.impuesto.valor=t.valor,this.idselected=t.id,this.editImpuesto=!0},exportTable(){const t=[this.columns.map(n=>_(n.label))].concat(this.rows.map(n=>this.columns.map(i=>_(typeof i.field=="function"?i.field(n):n[i.field===void 0?i.name:i.field],i.format,n)).join(","))).join(`\r
`);F("table-export.csv",t,"text/csv")!==!0&&P.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}},mounted(){this.loadImpuesto()},setup(){return{confirm:D(!1)}}},O={class:"q-pa-md"},M={class:"q-pa-md q-gutter-sm"},R=r("div",{class:"text-h6"},"Nuevo Impuesto",-1),$={class:"q-pa-md q-gutter-sm"},J=r("div",{class:"text-h6"},"Editar Impuesto",-1),G={class:"q-pa-md q-gutter-sm"},H=r("span",{class:"q-ml-sm"},"Desea eliminar el Impuesto?.",-1);function K(t,s,n,i,a,m){return w(),q(B,{class:"q-pa-md"},{default:l(()=>[r("div",O,[e(U,{flat:"",bordered:"",title:"Impuestos",rows:a.rows,columns:a.columns,color:"primary","row-key":"name"},{body:l(o=>[e(x,{props:o,onClick:W=>m.onRowClick(o.row)},{default:l(()=>[e(v,{key:"name",props:o},{default:l(()=>[c(b(o.row.name),1)]),_:2},1032,["props"]),e(v,{key:"descripcion",props:o},{default:l(()=>[c(b(o.row.descripcion),1)]),_:2},1032,["props"]),e(v,{key:"valor",props:o},{default:l(()=>[c(b(o.row.valor),1)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["rows","columns"])]),r("template",null,[r("div",M,[e(I,{modelValue:a.newImpuesto,"onUpdate:modelValue":s[5]||(s[5]=o=>a.newImpuesto=o),persistent:""},{default:l(()=>[e(y,{class:"my-card",flat:"",bordered:""},{default:l(()=>[e(u,null,{default:l(()=>[R]),_:1}),e(f),e(u,{class:"horizontal"},{default:l(()=>[e(d,{filled:"",modelValue:a.impuesto.name,"onUpdate:modelValue":s[0]||(s[0]=o=>a.impuesto.name=o),label:"Impuesto *","lazy-rules":"",rules:[o=>o&&o.length>0||"Debe introducir un Impuesto"]},null,8,["modelValue","rules"])]),_:1}),e(u,{class:"horizontal"},{default:l(()=>[e(d,{modelValue:a.impuesto.descripcion,"onUpdate:modelValue":s[1]||(s[1]=o=>a.impuesto.descripcion=o),filled:"",type:"textarea",label:"Descripcion"},null,8,["modelValue"])]),_:1}),e(u,{class:"horizontal"},{default:l(()=>[e(d,{filled:"",modelValue:a.impuesto.valor,"onUpdate:modelValue":s[2]||(s[2]=o=>a.impuesto.valor=o),label:"Valor",mask:"#.###","fill-mask":"0","reverse-fill-mask":"","input-class":"text-right"},null,8,["modelValue"])]),_:1}),e(f),e(V,null,{default:l(()=>[e(p,{label:"Enviar",icon:"send",type:"submit",color:"primary",flat:"",class:"q-ml-sm",onClick:s[3]||(s[3]=o=>m.AddImpuesto())}),e(p,{label:"Cancelar",icon:"cancel",type:"reset",color:"primary",flat:"",class:"q-ml-sm",onClick:s[4]||(s[4]=o=>m.ClosedNewImpuesto())})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),r("template",null,[r("div",$,[e(I,{modelValue:a.editImpuesto,"onUpdate:modelValue":s[12]||(s[12]=o=>a.editImpuesto=o),persistent:""},{default:l(()=>[e(y,{class:"my-card",flat:"",bordered:""},{default:l(()=>[e(u,{class:"horizontal"},{default:l(()=>[J]),_:1}),e(f),e(u,{class:"horizontal"},{default:l(()=>[e(d,{filled:"",modelValue:a.impuesto.name,"onUpdate:modelValue":s[6]||(s[6]=o=>a.impuesto.name=o),label:"Nombre *","lazy-rules":"",rules:[o=>o&&o.length>0||"Debe introducir un Impuesto"]},null,8,["modelValue","rules"])]),_:1}),e(u,{class:"horizontal"},{default:l(()=>[e(d,{modelValue:a.impuesto.descripcion,"onUpdate:modelValue":s[7]||(s[7]=o=>a.impuesto.descripcion=o),filled:"",type:"textarea",label:"Descripcion"},null,8,["modelValue"]),e(d,{filled:"",modelValue:a.impuesto.valor,"onUpdate:modelValue":s[8]||(s[8]=o=>a.impuesto.valor=o),label:"Valor",mask:"#.###","fill-mask":"0","reverse-fill-mask":"","input-class":"text-right"},null,8,["modelValue"])]),_:1}),e(f),e(V,null,{default:l(()=>[e(p,{label:"Enviar",icon:"send",type:"submit",color:"primary",flat:"",class:"q-ml-sm",onClick:s[9]||(s[9]=o=>m.EditImpuesto())}),e(p,{label:"Eliminar",icon:"delete",type:"submit",color:"negative",flat:"",class:"q-ml-sm",onClick:s[10]||(s[10]=o=>i.confirm=!0)}),e(p,{label:"Cerrar",icon:"cancel",type:"cancel",color:"primary",flat:"",class:"q-ml-sm",onClick:s[11]||(s[11]=o=>m.ClosedEditImpuesto())})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),e(A,{position:"top-right",offset:[18,18]},{default:l(()=>[C((w(),q(N,{icon:"add",direction:"down",color:"primary",disable:t.draggingFab},{default:l(()=>[e(k,{onClick:s[13]||(s[13]=o=>m.exportTable()),color:"positive",icon:"download",disable:t.draggingFab},{default:l(()=>[e(Q,null,{default:l(()=>[c(" Descargar ")]),_:1})]),_:1},8,["disable"]),e(k,{onClick:s[14]||(s[14]=o=>m.OpenNewImpuesto()),color:"positive",icon:"add_box",disable:t.draggingFab},{default:l(()=>[e(Q,null,{default:l(()=>[c(" Nuevo ")]),_:1})]),_:1},8,["disable"])]),_:1},8,["disable"])),[[T,t.moveFab,void 0,{prevent:!0,mouse:!0}]])]),_:1}),r("template",null,[r("div",G,[e(I,{modelValue:i.confirm,"onUpdate:modelValue":s[16]||(s[16]=o=>i.confirm=o),persistent:""},{default:l(()=>[e(y,null,{default:l(()=>[e(u,{class:"row items-center"},{default:l(()=>[e(E,{icon:"priority_high",color:"primary","text-color":"white"}),H]),_:1}),e(V,{align:"right"},{default:l(()=>[C(e(p,{label:"Cancelar",icon:"cancel",type:"cancel",color:"primary",flat:"",class:"q-ml-sm"},null,512),[[S]]),e(p,{label:"Eliminar",icon:"delete",type:"submit",color:"negative",flat:"",class:"q-ml-sm",onClick:s[15]||(s[15]=o=>m.DeleteImpuesto())})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),_:1})}var ce=z(j,[["render",K]]);export{ce as default};
