import{_,o as f,c as g,w as a,f as n,a as s,J as d,K as w,L as m,M as x,N as y,O as b,P as v}from"./index.ef228992.js";import{Q as u}from"./QInput.a2bee355.js";import{Q}from"./QForm.810f22b8.js";import{Q as q}from"./QCardActions.bed2bb53.js";import{Q as I}from"./QPage.2fc420a1.js";import"./axios.23aa70c0.js";import{b as V}from"./browser.b493a193.js";import{a as c}from"./authenticate.bcdfbf4f.js";import"./use-key-composition.25c6204a.js";import"./js.cookie.f93afda9.js";const k={name:"LoginPage",methods:{auth(e){this.$hello(e).login({scope:"friends"}).then(()=>{this.$router.push("profile")})},async login(){try{const e=await c.login(this.username,this.password);if(e){let t=0,o=V.read(e.data.token);o.claim.roles,c.setUserLogged(e.data.token);for(let r=0;r<o.claim.roles.length;r++)o.claim.roles[r]==="ADMIN"&&t++;t>0?this.$router.push("/Administracion"):this.$router.push("/")}}catch(e){e.response.data.message==="INACTIVE"?this.$router.push({path:"/Codigo/"+this.username,params:{username:this.username}}):this.$q.notify({type:"negative",message:e.response.data.message})}}},data(){return{email:"",username:"",password:""}}},h=e=>(b("data-v-425383eb"),e=e(),v(),e),C={class:"column q-pa-lg"},S={class:"row"},L=h(()=>n("h4",{class:"text-h5 text-white q-my-md"},"Entrar ",-1)),N=h(()=>n("p",{class:"text-grey-6"},"Forgot your password?",-1));function P(e,t,o,r,i,p){return f(),g(I,{class:"window-height window-width row justify-center items-center"},{default:a(()=>[n("div",C,[n("div",S,[s(y,{square:"",class:"shadow-24",style:{width:"300px",height:"500px"}},{default:a(()=>[s(d,{class:"bg-dark",style:{width:"300px",height:"90px"}},{default:a(()=>[L]),_:1}),s(d,null,{default:a(()=>[s(Q,{class:"q-px-sm q-pt-xl",onSubmit:w(p.login,["prevent"])},{default:a(()=>[s(u,{square:"",clearable:"",modelValue:i.username,"onUpdate:modelValue":t[0]||(t[0]=l=>i.username=l),type:"email",label:"Usuario"},{prepend:a(()=>[s(m,{name:"person"})]),_:1},8,["modelValue"]),s(u,{square:"",clearable:"",modelValue:i.password,"onUpdate:modelValue":t[1]||(t[1]=l=>i.password=l),type:"password",label:"Contrasena"},{prepend:a(()=>[s(m,{name:"lock"})]),_:1},8,["modelValue"])]),_:1},8,["onSubmit"])]),_:1}),s(q,{class:"q-px-lg"},{default:a(()=>[s(x,{unelevated:"",size:"lg",color:"blue-4",class:"full-width text-white",label:"Enviar",onClick:t[2]||(t[2]=l=>p.login())})]),_:1}),s(d,{class:"text-center q-pa-sm"},{default:a(()=>[N]),_:1})]),_:1})])])]),_:1})}var J=_(k,[["render",P],["__scopeId","data-v-425383eb"]]);export{J as default};
