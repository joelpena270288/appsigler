import{_ as Q,o as _,c as b,w as t,f as u,a as e,ag as i,aj as r,Q as E,e as g,af as m,M as c,N as v}from"./index.ef228992.js";import{Q as y}from"./QItemLabel.1cc16253.js";import{Q as n}from"./QInput.a2bee355.js";import{Q as x}from"./QCardActions.bed2bb53.js";import{Q as q}from"./QPage.2fc420a1.js";import{api as h}from"./axios.23aa70c0.js";import{u as C}from"./use-quasar.38626e8f.js";import{a as V}from"./authenticate.bcdfbf4f.js";import"./use-key-composition.25c6204a.js";import"./js.cookie.f93afda9.js";C();const I={name:"EmpresaPage",data(){return{empresa:{logo:"",nombre:"",telefono:"",email:""},id:""}},methods:{async loadEmpresa(){await h.get("/empresa",{headers:{Authorization:`Bearer ${V.getUserLogged()}`}}).then(l=>{this.empresa=l.data,this.id=l.data.id}).catch(l=>this.$q.notify({type:"negative",position:"top",message:l.response.data.message}))},checkFileSize(l){return l.filter(a=>a.size<2048)},checkFileType(l){return l.filter(a=>a.type==="image/png")},onRejected(l){this.$q.notify({type:"negative",message:`${l.length} No tiene el formato valido o excede el peso`})},uploadImage(l){const a=l.target.files[0];if(console.log(a.size+" "+a.type),a.size<=235980&&(a.type==="image/png"||a.type==="image/jpg"||a.type==="image/jpeg")){const d=new FileReader;d.readAsDataURL(a),d.onload=f=>{this.empresa.logo=f.target.result}}else this.$q.notify({color:"negative",position:"top",message:"El logo tiene que ser una imagen menor de 10 MB en formato jpg o png",icon:"report_problem"})},async EditEmpresa(){await h.patch("/empresa/"+this.id,this.empresa,{headers:{Authorization:`Bearer ${V.getUserLogged()}`}}).then(l=>{this.empresa=l.data,this.$q.notify({color:"positive",position:"top",message:"Se Modifico los datos de la empresa "+l.data.nombre,icon:"done"})}).catch(l=>this.$q.notify({type:"negative",position:"top",message:l.response.data.message}))},ClosedEditEmpresa(){this.$router.push("/Dashboard")}},mounted(){this.loadEmpresa()}},U={class:"q-pa-md row items-start q-gutter-md"},k=["src"];function N(l,a,d,f,s,p){return _(),b(q,{class:"q-pa-md"},{default:t(()=>[u("div",U,[e(v,{class:"my-card"},{default:t(()=>[e(i,null,{default:t(()=>[e(r,{avatar:""},{default:t(()=>[e(E,{size:"150px"},{default:t(()=>[u("img",{src:s.empresa.logo},null,8,k)]),_:1})]),_:1}),e(r,null,{default:t(()=>[e(y,null,{default:t(()=>[g("Logo")]),_:1}),e(y,{caption:""},{default:t(()=>[g("EQUIPOS SIGLER")]),_:1}),u("input",{type:"file",accept:"image/jpeg",onChange:a[0]||(a[0]=(...o)=>p.uploadImage&&p.uploadImage(...o))},null,32)]),_:1})]),_:1}),e(m),e(i,null,{default:t(()=>[e(r,null,{default:t(()=>[e(n,{filled:"",modelValue:s.empresa.nombre,"onUpdate:modelValue":a[1]||(a[1]=o=>s.empresa.nombre=o),label:"Nombre","input-class":"text-right"},null,8,["modelValue"])]),_:1})]),_:1}),e(m),e(i,null,{default:t(()=>[e(r,null,{default:t(()=>[e(n,{filled:"",modelValue:s.empresa.rnc,"onUpdate:modelValue":a[2]||(a[2]=o=>s.empresa.rnc=o),label:"RNC",mask:"###- ##### - #","input-class":"text-right"},null,8,["modelValue"])]),_:1})]),_:1}),e(m),e(i,null,{default:t(()=>[e(r,null,{default:t(()=>[e(n,{filled:"",modelValue:s.empresa.telefono,"onUpdate:modelValue":a[3]||(a[3]=o=>s.empresa.telefono=o),label:"Numero de Telefono",mask:"(###)- ### - ####","input-class":"text-right"},null,8,["modelValue"])]),_:1})]),_:1}),e(m),e(i,null,{default:t(()=>[e(r,null,{default:t(()=>[e(n,{modelValue:s.empresa.email,"onUpdate:modelValue":a[4]||(a[4]=o=>s.empresa.email=o),filled:"",type:"email",label:"correo","input-class":"text-right"},null,8,["modelValue"])]),_:1})]),_:1}),e(m),e(i,null,{default:t(()=>[e(r,null,{default:t(()=>[e(n,{modelValue:s.empresa.direccion,"onUpdate:modelValue":a[5]||(a[5]=o=>s.empresa.direccion=o),filled:"",type:"textarea",label:"Direccion"},null,8,["modelValue"])]),_:1})]),_:1}),e(m),e(x,null,{default:t(()=>[e(c,{label:"Enviar",icon:"send",type:"submit",color:"primary",flat:"",class:"q-ml-sm",onClick:a[6]||(a[6]=o=>p.EditEmpresa())}),e(c,{label:"Cerrar",icon:"cancel",type:"cancel",color:"primary",flat:"",class:"q-ml-sm",onClick:a[7]||(a[7]=o=>p.ClosedEditEmpresa())})]),_:1})]),_:1})])]),_:1})}var F=Q(I,[["render",N]]);export{F as default};
